import React, { useState, useRef, useEffect } from 'react';
import { View, Text, StyleSheet, ScrollView, TouchableOpacity, TextInput, Alert, Modal, Platform, Animated, Image } from 'react-native';
import Icon from 'react-native-vector-icons/Ionicons';
import DateTimePicker from '@react-native-community/datetimepicker';
import { colors, typography, spacing, borderRadius, shadows, globalStyles } from '../styles/globalStyles';
import { 
  DottedLine, 
  JournalTitle, 
  JournalText, 
  JournalSticker, 
  NatureElement, 
  BulletPoint, 
  StickyNote, 
  WritingLine 
} from './BulletJournalElements';

const WorkSections = ({ selectedDate, events, onAddEvent, onEditEvent, onDeleteEvent }) => {
  const [activeSection, setActiveSection] = useState('weeklyTaskList');
  const [projectData, setProjectData] = useState({
    title: '',
    aim: '',
    startDate: '',
    deadline: '',
    teammates: [],
    achievements: [],
    works: [],
    funding: []
  });
  const [weeklyTasks, setWeeklyTasks] = useState([]);
  const [dailyTasks, setDailyTasks] = useState({});
  const [priorities, setPriorities] = useState([]);
  const [focus, setFocus] = useState([]);
  const [goals, setGoals] = useState([]);
  const [projects, setProjects] = useState([]);
  const [newTaskText, setNewTaskText] = useState('');
  const [newTaskDate, setNewTaskDate] = useState(new Date());
  const [showDatePicker, setShowDatePicker] = useState(false);
  const [showNotesModal, setShowNotesModal] = useState(false);
  const [selectedTaskNotes, setSelectedTaskNotes] = useState('');
  const [editingTaskIndex, setEditingTaskIndex] = useState(null);
  
  // Estados para tareas diarias
  const [newDailyTaskText, setNewDailyTaskText] = useState('');
  const [newDailyTaskDate, setNewDailyTaskDate] = useState(new Date());
  const [newDailyTaskTime, setNewDailyTaskTime] = useState(new Date());
  const [showDailyDatePicker, setShowDailyDatePicker] = useState(false);
  const [showDailyTimePicker, setShowDailyTimePicker] = useState(false);
  const [showDailyNotesModal, setShowDailyNotesModal] = useState(false);
  const [selectedDailyTaskNotes, setSelectedDailyTaskNotes] = useState('');
  const [editingDailyTaskIndex, setEditingDailyTaskIndex] = useState(null);
  
  // Estados para modales de metas
  const [showDateModal, setShowDateModal] = useState(false);
  const [showPersonModal, setShowPersonModal] = useState(false);
  const [editingAchievementIndex, setEditingAchievementIndex] = useState(null);
  const [tempDate, setTempDate] = useState('');
  const [tempPerson, setTempPerson] = useState('');
  const [tempPosition, setTempPosition] = useState('');
  const [newAchievementText, setNewAchievementText] = useState('');
  
  // Estados para proyectos
  const [showAddProjectModal, setShowAddProjectModal] = useState(false);
  const [newProjectName, setNewProjectName] = useState('');
  const [newProjectDescription, setNewProjectDescription] = useState('');
  const [newProjectDeadline, setNewProjectDeadline] = useState('');
  const [newProjectGoals, setNewProjectGoals] = useState([]);
  const [newProjectGoalText, setNewProjectGoalText] = useState('');
  
  // Estados para modales de metas del proyecto
  const [showProjectDateModal, setShowProjectDateModal] = useState(false);
  const [showProjectPersonModal, setShowProjectPersonModal] = useState(false);
  const [editingProjectGoalId, setEditingProjectGoalId] = useState(null);
  const [tempProjectDate, setTempProjectDate] = useState('');
  const [tempProjectPerson, setTempProjectPerson] = useState('');
  const [tempProjectPosition, setTempProjectPosition] = useState('');
  // Estados para el calendario de fecha límite del proyecto
  const [showProjectDeadlineModal, setShowProjectDeadlineModal] = useState(false);
  const [tempProjectDeadline, setTempProjectDeadline] = useState('');
  // Estados para prioridades mejoradas
  const [priorityList, setPriorityList] = useState([]);
  const [newPriorityText, setNewPriorityText] = useState('');
  const priorityColors = ['#FF6B6B', '#4ECDC4', '#45B7D1', '#96CEB4', '#FFEAA7'];
  // Estados para enfoque mejorado
  const [focusList, setFocusList] = useState([]);
  const [newFocusText, setNewFocusText] = useState('');
  const focusColors = ['#0c5460', '#17a2b8', '#6f42c1', '#e83e8c', '#fd7e14'];
  // Estados para objetivos mejorados
  const [goalsList, setGoalsList] = useState([]);
  const [newGoalText, setNewGoalText] = useState('');
  const goalsColors = ['#28a745', '#20c997', '#ffc107', '#dc3545', '#6c757d'];

  const sections = [
    { id: 'weeklyTaskList', name: 'Weekly Task List', icon: 'calendar-outline', cuteIcon: 'star' },
    { id: 'dailyTaskList', name: 'Daily Task List', icon: 'today-outline', cuteIcon: 'sun' },
    { id: 'projectStrategy', name: 'Project Strategy', icon: 'folder-outline', cuteIcon: 'heart' },
    { id: 'projectOverview', name: 'Project Overview', icon: 'document-outline', cuteIcon: 'moon' }
  ];

  const addTeammate = () => {
    setProjectData(prev => ({
      ...prev,
      teammates: [...prev.teammates, { position: '', name: '' }]
    }));
  };

  const updateTeammate = (index, field, value) => {
    setProjectData(prev => ({
      ...prev,
      teammates: prev.teammates.map((teammate, i) => 
        i === index ? { ...teammate, [field]: value } : teammate
      )
    }));
  };

  const addAchievement = () => {
    if (newAchievementText.trim() === '') {
      Alert.alert('Error', 'Por favor ingresa una meta');
      return;
    }
    
    setProjectData(prev => ({
      ...prev,
      achievements: [...prev.achievements, { 
        name: newAchievementText.trim(), 
        dueDate: '', 
        assignedPerson: '', 
        position: '' 
      }]
    }));
    
    setNewAchievementText('');
  };

  const updateAchievement = (index, field, value) => {
    setProjectData(prev => ({
      ...prev,
      achievements: prev.achievements.map((achievement, i) => 
        i === index ? { ...achievement, [field]: value } : achievement
      )
    }));
  };

  const removeAchievement = (index) => {
    Alert.alert(
      'Eliminar Meta',
      '¿Estás seguro de que quieres eliminar esta meta?',
      [
        { text: 'Cancelar', style: 'cancel' },
        {
          text: 'Eliminar',
          style: 'destructive',
          onPress: () => {
            setProjectData(prev => ({
              ...prev,
              achievements: prev.achievements.filter((_, i) => i !== index)
            }));
          }
        }
      ]
    );
  };

  // Funciones para proyectos
  const addProject = async () => {
    if (newProjectName.trim() === '') {
      Alert.alert('Error', 'Por favor ingresa un nombre para el proyecto');
      return;
    }
    
    const newProject = {
      id: Date.now().toString(),
      name: newProjectName.trim(),
      description: newProjectDescription.trim(),
      deadline: newProjectDeadline.trim(),
      goals: newProjectGoals,
      createdAt: new Date().toISOString(),
    };
    
    const updatedProjects = [...projects, newProject];
    setProjects(updatedProjects);
    
    // Guardar en Supabase
    await saveWorkData({
      projects: updatedProjects
    });
    
    setNewProjectName('');
    setNewProjectDescription('');
    setNewProjectDeadline('');
    setNewProjectGoals([]);
    setNewProjectGoalText('');
    setShowAddProjectModal(false);
  };

  const addProjectGoal = () => {
    if (newProjectGoalText.trim() === '') {
      Alert.alert('Error', 'Por favor ingresa el texto de la meta');
      return;
    }
    
    const newGoal = {
      id: Date.now().toString(),
      name: newProjectGoalText.trim(),
      dueDate: tempProjectDate || '',
      assignedPerson: tempProjectPerson || '',
    };
    
    setNewProjectGoals(prev => [...prev, newGoal]);
    setNewProjectGoalText('');
    setTempProjectDate('');
    setTempProjectPerson('');
  };

  const removeProjectGoal = (goalId) => {
    setNewProjectGoals(prev => prev.filter(goal => goal.id !== goalId));
  };

  const updateProjectGoal = (goalId, field, value) => {
    try {
      if (!goalId || !field) {
        console.error('updateProjectGoal: goalId o field es null/undefined', { goalId, field, value });
        return;
      }
      
      setNewProjectGoals(prev => {
        try {
          if (!Array.isArray(prev)) {
            console.error('newProjectGoals no es un array:', prev);
            return [];
          }
          
          return prev.map(goal => {
            if (!goal || !goal.id) {
              console.error('Goal inválido encontrado:', goal);
              return goal;
            }
            return goal.id === goalId ? { ...goal, [field]: value } : goal;
          });
        } catch (error) {
          console.error('Error en updateProjectGoal map:', error);
          return prev;
        }
      });
    } catch (error) {
      console.error('Error general en updateProjectGoal:', error);
    }
  };

  // Funciones para modales de metas del proyecto
  const openProjectDateModal = (goalId) => {
    if (!goalId || goalId === -1) {
      console.error('openProjectDateModal: goalId es inválido:', goalId);
      Alert.alert('Error', 'No se puede asignar fecha: ID de meta inválido');
      return;
    }
    
    if (!Array.isArray(newProjectGoals) || newProjectGoals.length === 0) {
      console.error('openProjectDateModal: No hay metas del proyecto');
      Alert.alert('Error', 'No hay metas del proyecto para asignar fecha');
      return;
    }
    
    const goal = newProjectGoals.find(g => g && g.id === goalId);
    if (!goal) {
      console.error('openProjectDateModal: No se encontró la meta con ID:', goalId);
      Alert.alert('Error', 'No se encontró la meta del proyecto');
      return;
    }
    
    setEditingProjectGoalId(goalId);
    setTempProjectDate(goal?.dueDate || '');
    setShowProjectDateModal(true);
  };

  const openProjectPersonModal = (goalId) => {
    console.log('Abriendo modal de persona para goalId:', goalId);
    console.log('newProjectGoals:', newProjectGoals);
    
    if (!goalId || goalId === -1) {
      console.error('openProjectPersonModal: goalId es inválido:', goalId);
      Alert.alert('Error', 'No se puede asignar persona: ID de meta inválido');
      return;
    }
    
    if (!Array.isArray(newProjectGoals) || newProjectGoals.length === 0) {
      console.error('openProjectPersonModal: No hay metas del proyecto');
      Alert.alert('Error', 'No hay metas del proyecto para asignar persona');
      return;
    }
    
    const goal = newProjectGoals.find(g => g && g.id === goalId);
    console.log('Goal encontrado:', goal);
    
    if (!goal) {
      console.error('openProjectPersonModal: No se encontró la meta con ID:', goalId);
      Alert.alert('Error', 'No se encontró la meta del proyecto');
      return;
    }
    
    setEditingProjectGoalId(goalId);
    setTempProjectPerson(goal?.assignedPerson || '');
    setShowProjectPersonModal(true);
  };

  const saveProjectDate = () => {
    if (editingProjectGoalId !== null) {
      updateProjectGoal(editingProjectGoalId, 'dueDate', tempProjectDate);
    }
    setShowProjectDateModal(false);
    setEditingProjectGoalId(null);
    setTempProjectDate('');
  };

  const saveProjectPerson = () => {
    // Solo cerrar el modal, la persona ya está guardada en tempProjectPerson
    setShowProjectPersonModal(false);
  };

  // Funciones para el calendario de fecha límite del proyecto
  const openProjectDeadlineModal = () => {
    setTempProjectDeadline(newProjectDeadline);
    setShowProjectDeadlineModal(true);
  };

  const saveProjectDeadline = () => {
    setNewProjectDeadline(tempProjectDeadline);
    setShowProjectDeadlineModal(false);
    setTempProjectDeadline('');
  };

  const removeProject = (projectId) => {
    Alert.alert(
      'Eliminar Proyecto',
      '¿Estás seguro de que quieres eliminar este proyecto? Se perderán todas las metas asociadas.',
      [
        { text: 'Cancelar', style: 'cancel' },
        {
          text: 'Eliminar',
          style: 'destructive',
          onPress: () => {
            setProjects(prev => prev.filter(project => project.id !== projectId));
          }
        }
      ]
    );
  };

  // Funciones para modales de metas
  const openDateModal = (index) => {
    setEditingAchievementIndex(index);
    setTempDate(projectData.achievements[index]?.dueDate || '');
    setShowDateModal(true);
  };

  const openPersonModal = (index) => {
    setEditingAchievementIndex(index);
    setTempPerson(projectData.achievements[index]?.assignedPerson || '');
    setTempPosition(projectData.achievements[index]?.position || '');
    setShowPersonModal(true);
  };

  const saveDate = () => {
    if (editingAchievementIndex !== null) {
      updateAchievement(editingAchievementIndex, 'dueDate', tempDate);
    }
    setShowDateModal(false);
    setEditingAchievementIndex(null);
    setTempDate('');
  };

  const savePerson = () => {
    if (editingAchievementIndex !== null) {
      updateAchievement(editingAchievementIndex, 'assignedPerson', tempPerson);
      updateAchievement(editingAchievementIndex, 'position', tempPosition);
    }
    setShowPersonModal(false);
    setEditingAchievementIndex(null);
    setTempPerson('');
    setTempPosition('');
  };

  const addWork = () => {
    setProjectData(prev => ({
      ...prev,
      works: [...prev.works, { position: '', appoint: '', status: '', startDate: '', deadline: '', notes: '' }]
    }));
  };

  const updateWork = (index, field, value) => {
    setProjectData(prev => ({
      ...prev,
      works: prev.works.map((work, i) => 
        i === index ? { ...work, [field]: value } : work
      )
    }));
  };

  const addFunding = () => {
    setProjectData(prev => ({
      ...prev,
      funding: [...prev.funding, { element: '', projectedCost: '', realCost: '', notes: '' }]
    }));
  };

  const updateFunding = (index, field, value) => {
    setProjectData(prev => ({
      ...prev,
      funding: prev.funding.map((fund, i) => 
        i === index ? { ...fund, [field]: value } : fund
      )
    }));
  };

  // Función para guardar datos en Supabase
  const saveWorkData = async (sectionData) => {
    if (onUpdateSection) {
      try {
        await onUpdateSection('work', sectionData);
      } catch (error) {
        console.error('Error saving work data:', error);
      }
    }
  };

  const getCurrentWeekDates = () => {
    const today = new Date();
    const dayOfWeek = today.getDay();
    const startOfWeek = new Date(today);
    startOfWeek.setDate(today.getDate() - dayOfWeek);
    const endOfWeek = new Date(startOfWeek);
    endOfWeek.setDate(startOfWeek.getDate() + 6);
    
    return {
      start: startOfWeek.toISOString().split('T')[0],
      end: endOfWeek.toISOString().split('T')[0]
    };
  };

  const getTaskStatus = (taskDate) => {
    if (!taskDate) return 'current';
    
    const today = new Date().toISOString().split('T')[0];
    const weekDates = getCurrentWeekDates();
    
    if (taskDate < weekDates.start) {
      return 'overdue';
    } else if (taskDate > weekDates.end) {
      return 'future';
    } else {
      return 'current';
    }
  };

  const getTaskStatusLabel = (status) => {
    switch (status) {
      case 'overdue':
        return 'Tarea Atrasada';
      case 'future':
        return 'Para Próxima Semana';
      default:
        return '';
    }
  };

  const getTaskStatusColor = (status) => {
    switch (status) {
      case 'overdue':
        return colors.error;
      case 'current':
        return colors.primary;
      case 'future':
        return colors.warning;
      default:
        return colors.success;
    }
  };

  const getPriorityColor = (priority) => {
    switch (priority) {
      case 'high':
        return colors.error;
      case 'medium':
        return colors.warning;
      case 'low':
        return colors.success;
      default:
        return colors.textTertiary;
    }
  };

  const getPriorityLabel = (priority) => {
    switch (priority) {
      case 'high':
        return 'Alta';
      case 'medium':
        return 'Media';
      case 'low':
        return 'Baja';
      default:
        return 'Media';
    }
  };

  const getPriorityEmoji = (priority) => {
    switch (priority) {
      case 'high':
        return '🔥';
      case 'medium':
        return '⭐';
      case 'low':
        return '🌱';
      default:
        return '⭐';
    }
  };

  const editWeeklyTask = (index) => {
    const task = weeklyTasks[index];
    Alert.prompt(
      'Editar Tarea',
      'Modifica el texto de la tarea:',
      [
        { text: 'Cancelar', style: 'cancel' },
        {
          text: 'Guardar',
          onPress: (newText) => {
            if (newText && newText.trim() !== '') {
              const updatedTasks = [...weeklyTasks];
              updatedTasks[index] = {
                ...updatedTasks[index],
                task: newText.trim()
              };
              setWeeklyTasks(updatedTasks);
            }
          }
        }
      ],
      'plain-text',
      task.task
    );
  };

  const formatTaskDate = (dateString) => {
    const date = new Date(dateString);
    const today = new Date();
    const diffTime = date.getTime() - today.getTime();
    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
    
    if (diffDays === 0) {
      return 'Hoy';
    } else if (diffDays === 1) {
      return 'Mañana';
    } else if (diffDays === -1) {
      return 'Ayer';
    } else if (diffDays > 0) {
      return `En ${diffDays} días`;
    } else {
      return `Hace ${Math.abs(diffDays)} días`;
    }
  };

  const onDateChange = (event, selectedDate) => {
    setShowDatePicker(Platform.OS === 'ios');
    if (selectedDate) {
      setNewTaskDate(selectedDate);
    }
  };

  const formatDate = (date) => {
    return date.toISOString().split('T')[0];
  };

  const formatDisplayDate = (date) => {
    return date.toLocaleDateString('es-ES', {
      day: '2-digit',
      month: '2-digit',
      year: 'numeric'
    });
  };

  const addWeeklyTask = () => {
    if (newTaskText.trim() === '') {
      Alert.alert('Error', 'Por favor ingresa una tarea');
      return;
    }
    
    const taskDateString = formatDate(newTaskDate);
    const status = getTaskStatus(taskDateString);
    
    const newTask = {
      id: Date.now().toString(),
      task: newTaskText.trim(),
      date: taskDateString,
      notes: '',
      completed: false,
      status: status
    };
    
    setWeeklyTasks(prev => [...prev, newTask]);
    setNewTaskText('');
    setNewTaskDate(new Date()); // Reset to current date
  };

  // Funciones para tareas diarias
  const onDailyDateChange = (event, selectedDate) => {
    setShowDailyDatePicker(Platform.OS === 'ios');
    if (selectedDate) {
      setNewDailyTaskDate(selectedDate);
    }
  };

  const onDailyTimeChange = (event, selectedTime) => {
    setShowDailyTimePicker(Platform.OS === 'ios');
    if (selectedTime) {
      setNewDailyTaskTime(selectedTime);
    }
  };

  const formatTime = (date) => {
    return date.toLocaleTimeString('es-ES', {
      hour: '2-digit',
      minute: '2-digit'
    });
  };

  const addDailyTask = () => {
    if (newDailyTaskText.trim() === '') {
      Alert.alert('Error', 'Por favor ingresa una tarea');
      return;
    }
    
    const taskDateString = formatDate(newDailyTaskDate);
    const taskTimeString = formatTime(newDailyTaskTime);
    
    const newTask = {
      id: Date.now().toString(),
      task: newDailyTaskText.trim(),
      date: taskDateString,
      time: taskTimeString,
      notes: '',
      completed: false
    };
    
    setDailyTasks(prev => ({
      ...prev,
      [taskDateString]: [...(prev[taskDateString] || []), newTask]
    }));
    
    setNewDailyTaskText('');
    setNewDailyTaskDate(new Date());
    setNewDailyTaskTime(new Date());
  };

  const toggleDailyTaskCompleted = (date, index) => {
    setDailyTasks(prev => ({
      ...prev,
      [date]: prev[date].map((task, i) => 
        i === index ? { ...task, completed: !task.completed } : task
      )
    }));
  };

  const removeDailyTask = (date, index) => {
    setDailyTasks(prev => ({
      ...prev,
      [date]: prev[date].filter((_, i) => i !== index)
    }));
  };

  const showDailyTaskNotes = (notes, date, index) => {
    setSelectedDailyTaskNotes(notes);
    setEditingDailyTaskIndex({ date, index });
    setShowDailyNotesModal(true);
  };

  const updateDailyTaskNotes = (notes) => {
    setSelectedDailyTaskNotes(notes);
    if (editingDailyTaskIndex !== null && editingDailyTaskIndex.date && editingDailyTaskIndex.index !== null) {
      setDailyTasks(prev => ({
        ...prev,
        [editingDailyTaskIndex.date]: prev[editingDailyTaskIndex.date].map((task, i) => 
          i === editingDailyTaskIndex.index ? { ...task, notes } : task
        )
      }));
    }
  };

  const closeDailyNotesModal = () => {
    setShowDailyNotesModal(false);
    setSelectedDailyTaskNotes('');
    setEditingDailyTaskIndex(null);
  };

  const toggleTaskCompleted = (index) => {
    setWeeklyTasks(prev => prev.map((task, i) => 
      i === index ? { ...task, completed: !task.completed } : task
    ));
  };

  const removeWeeklyTask = (index) => {
    setWeeklyTasks(prev => prev.filter((_, i) => i !== index));
  };

  const showTaskNotes = (notes, index) => {
    setSelectedTaskNotes(notes);
    setEditingTaskIndex(index);
    setShowNotesModal(true);
  };

  const updateTaskNotes = (notes) => {
    setSelectedTaskNotes(notes);
    if (editingTaskIndex !== null) {
      setWeeklyTasks(prev => prev.map((task, i) => 
        i === editingTaskIndex ? { ...task, notes } : task
      ));
    }
  };

  const closeNotesModal = () => {
    setShowNotesModal(false);
    setSelectedTaskNotes('');
    setEditingTaskIndex(null);
  };


  const renderSectionTabs = () => (
    <View style={styles.tabsContainer}>
      <View style={styles.tabsWrapper}>
        {sections.map(section => (
          <TouchableOpacity
            key={section.id}
            style={[
              styles.tab,
              activeSection === section.id && styles.activeTab
            ]}
            onPress={() => setActiveSection(section.id)}
          >
            <View style={[styles.tabContent, {
              backgroundColor: activeSection === section.id ? colors.primary : 'transparent',
              borderColor: activeSection === section.id ? colors.primary : colors.pencil,
            }]}>
              <Icon 
                name={section.icon} 
                size={20} 
                color={activeSection === section.id ? '#FFFFFF' : colors.textSecondary} 
              />
              {activeSection === section.id && (
                <View style={styles.activeIndicator} />
              )}
            </View>
          </TouchableOpacity>
        ))}
      </View>
    </View>
  );

  const renderWeeklyTaskList = () => (
    <View style={styles.section}>
      <View style={styles.sectionHeader}>
        <View style={styles.headerDecoration}>
          <Image 
            source={require('../../android/app/src/main/assets/mascota.png')}
            style={styles.mascotImage}
            resizeMode="contain"
          />
        </View>
        <JournalTitle style={[styles.sectionTitle, globalStyles.neonText]}>
          WEEKLY TASK LIST
        </JournalTitle>
        <JournalText style={styles.sectionSubtitle}>
          Planifica tu semana de trabajo
        </JournalText>
      </View>

      {/* Tabla de días de la semana */}
      <View style={styles.weeklyTableContainer}>
        <View style={styles.tableHeader}>
          <Text style={styles.tableHeaderText}>DAY</Text>
          <Text style={styles.tableHeaderText}>JOB</Text>
          <Text style={styles.tableHeaderText}>APPOINT</Text>
          <Text style={styles.tableHeaderText}>UNDERTAKING</Text>
          <Text style={styles.tableHeaderText}>NOTES</Text>
        </View>
        
        {['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'].map((day, index) => (
          <View key={day} style={styles.weeklyTableRow}>
            <Text style={styles.dayText}>{day}</Text>
            <TextInput 
              style={styles.tableInput} 
              placeholder="Job task..."
              placeholderTextColor={colors.textTertiary}
            />
            <TextInput 
              style={styles.tableInput} 
              placeholder="Appointment..."
              placeholderTextColor={colors.textTertiary}
            />
            <TextInput 
              style={styles.tableInput} 
              placeholder="Undertaking..."
              placeholderTextColor={colors.textTertiary}
            />
            <TextInput 
              style={styles.tableInput} 
              placeholder="Notes..."
              placeholderTextColor={colors.textTertiary}
            />
          </View>
        ))}
      </View>

      {/* Sección de Prioridades y Enfoque */}
      <View style={styles.prioritiesFocusContainer}>
        <View style={styles.prioritiesBox}>
          <Text style={styles.prioritiesTitle}>PRIORITIES</Text>
          <TextInput 
            style={styles.prioritiesInput}
            placeholder="Write your priorities here..."
            placeholderTextColor={colors.textTertiary}
            multiline
            numberOfLines={4}
          />
        </View>
        
        <View style={styles.focusBox}>
          <Text style={styles.focusTitle}>FOCUS</Text>
          <TextInput 
            style={styles.focusInput}
            placeholder="Write your focus here..."
            placeholderTextColor={colors.textTertiary}
            multiline
            numberOfLines={4}
          />
        </View>
      </View>

      {/* Lista de tareas */}
      <View style={styles.tasksList}>
        {weeklyTasks.length === 0 ? (
          <StickyNote color={colors.watercolor2} style={styles.emptyState}>
            <View style={styles.emptyIconContainer}>
              <NatureElement type="leaf" size={48} />
              <JournalSticker emoji="📝" size={32} />
            </View>
            <JournalTitle style={styles.emptyTitle}>
              ✨ Página en blanco ✨
            </JournalTitle>
            <JournalText style={styles.emptySubtitle}>
              ¡Tu bullet journal está listo! Escribe tu primera tarea arriba y toca el botón + para comenzar tu semana organizada
            </JournalText>
            <DottedLine color={colors.pencil} />
            <View style={styles.emptyTipContainer}>
          
              <JournalText style={styles.emptyTip}>
                💡 Tip: Las tareas semanales te ayudan a mantenerte enfocado en tus objetivos
              </JournalText>
            </View>
          </StickyNote>
        ) : (
          <View style={styles.tasksContainer}>
            {/* Header de estadísticas */}
            <View style={styles.tasksStatsHeader}>
              <View style={styles.statsContainer}>
                <View style={styles.statItem}>
                  <NatureElement type="sun" size={20} color={colors.primary} />
                  <JournalText style={styles.statText}>
                    {weeklyTasks.length} tareas
                  </JournalText>
                </View>
                <View style={styles.statItem}>
                  <NatureElement type="star" size={20} color={colors.success} />
                  <JournalText style={styles.statText}>
                    {weeklyTasks.filter(task => task.completed).length} completadas
                  </JournalText>
                </View>
                <View style={styles.statItem}>
                  <NatureElement type="moon" size={20} color={colors.warning} />
                  <JournalText style={styles.statText}>
                    {weeklyTasks.filter(task => !task.completed).length} pendientes
                  </JournalText>
                </View>
              </View>
              <DottedLine color={colors.pencil} />
            </View>
            <ScrollView 
              style={styles.tasksScrollView}
              showsVerticalScrollIndicator={false}
              accessibilityLabel="Lista de tareas semanales"
            >
              {weeklyTasks
                .sort((a, b) => {
                  // Ordenar por prioridad y fecha
                  const priorityOrder = { high: 3, medium: 2, low: 1 };
                  const aPriority = priorityOrder[a.priority] || 2;
                  const bPriority = priorityOrder[b.priority] || 2;
                  
                  if (aPriority !== bPriority) {
                    return bPriority - aPriority; // Alta prioridad primero
                  }
                  
                  // Si misma prioridad, ordenar por fecha
                  const dateA = new Date(a.date);
                  const dateB = new Date(b.date);
                  return dateA - dateB;
                })
                .map((task, index) => {
                  const taskStatus = task.status || getTaskStatus(task.date);
                  const statusLabel = getTaskStatusLabel(taskStatus);
                  const statusColor = getTaskStatusColor(taskStatus);
                  
                  return (
                    <Animated.View 
                      key={task.id} 
                      style={[
                        styles.bulletJournalEntry, 
                        task.completed && styles.completedEntry,
                        {
                          opacity: new Animated.Value(1),
                          transform: [{ scale: new Animated.Value(1) }]
                        }
                      ]}
                      accessibilityRole="button"
                      accessibilityLabel={`Tarea: ${task.task}. ${task.completed ? 'Completada' : 'Pendiente'}. Prioridad: ${task.priority || 'media'}. Fecha: ${task.date || 'No especificada'}`}
                      accessibilityHint={task.completed ? "Toca para marcar como pendiente" : "Toca para marcar como completada"}
                    >
                {/* Línea de escritura del bullet journal */}
                <View style={styles.journalLine}>
                  <View style={styles.bulletSection}>
                    <TouchableOpacity
                      onPress={() => toggleTaskCompleted(index)}
                      style={styles.bulletButton}
                      accessibilityLabel={task.completed ? "Marcar como pendiente" : "Marcar como completada"}
                      accessibilityRole="button"
                    >
                      {task.completed ? (
                        <View style={styles.completedBullet}>
                          <Text style={styles.completedCheckmark}>✓</Text>
                        </View>
                      ) : (
                        <BulletPoint 
                          type="dot" 
                          color={getPriorityColor(task.priority || 'medium')} 
                          size={12} 
                        />
                      )}
                    </TouchableOpacity>
                    
                    {/* Sticker de prioridad */}
                    {task.priority && (
                      <JournalSticker 
                        emoji={getPriorityEmoji(task.priority)} 
                        size={20} 
                        style={styles.prioritySticker}
                      />
                    )}
                  </View>
                  
                  <View style={styles.taskContent}>
                    <View style={styles.taskTextContainer}>
                      <JournalText style={[
                        styles.taskText, 
                        task.completed && styles.completedTaskText
                      ]}>
                        {task.task}
                      </JournalText>
                      
                      {/* Elementos decorativos naturales */}
                      <View style={styles.decorativeElements}>
                        <NatureElement type="leaf" size={16} />
                        <NatureElement type="star" size={14} />
                      </View>
                    </View>
                    
                    {/* Información meta en estilo bullet journal */}
                    <View style={styles.journalMetaInfo}>
                      {task.date && (
                        <View style={styles.metaItem}>
                          <NatureElement type="sun" size={14} />
                          <JournalText style={styles.metaText}>
                            {formatTaskDate(task.date)}
                          </JournalText>
                        </View>
                      )}
                      
                      {task.estimatedTime && (
                        <View style={styles.metaItem}>
                          <NatureElement type="moon" size={14} />
                          <JournalText style={styles.metaText}>
                            {task.estimatedTime}
                          </JournalText>
                        </View>
                      )}
                    </View>
                    
                    {/* Línea decorativa */}
                    <DottedLine color={colors.pencil} style={styles.decorativeLine} />
                    
                    {/* Estado en estilo bullet journal */}
                    {statusLabel && (
                      <View style={styles.journalStatus}>
                        <NatureElement type="butterfly" size={16} />
                        <JournalText style={[styles.statusText, { color: statusColor }]}>
                          {statusLabel}
                        </JournalText>
                      </View>
                    )}
                  </View>
                </View>
                
                {/* Acciones en estilo bullet journal */}
                <View style={styles.journalActions}>
                  <View style={styles.progressIndicator}>
                    <JournalText style={styles.progressText}>
                      {task.completed ? '✨ Completada' : '📝 En progreso'}
                    </JournalText>
                    {task.priority && (
                      <View style={styles.priorityIndicator}>
                        <NatureElement 
                          type="star" 
                          size={16} 
                          color={getPriorityColor(task.priority)} 
                        />
                        <JournalText style={styles.priorityText}>
                          {getPriorityLabel(task.priority)}
                        </JournalText>
                      </View>
                    )}
                  </View>
                  
                  <View style={styles.actionButtons}>
                    <TouchableOpacity
                      onPress={() => showTaskNotes(task.notes, index)}
                      style={[styles.journalButton, task.notes.trim() !== '' && styles.activeButton]}
                      accessibilityLabel={task.notes.trim() !== '' ? "Editar notas existentes" : "Agregar notas"}
                      accessibilityRole="button"
                      accessibilityHint="Toca para agregar o editar notas de la tarea"
                    >
                      <NatureElement type="flower" size={18} />
                    </TouchableOpacity>
                    
                    <TouchableOpacity
                      onPress={() => editWeeklyTask(index)}
                      style={[styles.journalButton, styles.editButton]}
                      accessibilityLabel="Editar tarea"
                      accessibilityRole="button"
                      accessibilityHint="Toca para editar el texto de la tarea"
                    >
                      <NatureElement type="butterfly" size={18} />
                    </TouchableOpacity>
                    
                    <TouchableOpacity
                      onPress={() => removeWeeklyTask(index)}
                      style={[styles.journalButton, styles.deleteButton]}
                      accessibilityLabel="Eliminar tarea"
                      accessibilityRole="button"
                      accessibilityHint="Toca para eliminar esta tarea permanentemente"
                    >
                      <NatureElement type="cloud" size={18} />
                    </TouchableOpacity>
                  </View>
                </View>
              </Animated.View>
            );
          })}
            </ScrollView>
          </View>
        )}
      </View>
    </View>
  );

  const renderDailyTaskList = () => (
    <View style={styles.section}>
      <View style={styles.sectionHeader}>
        <View style={styles.headerDecoration}>
          <Image 
            source={require('../../android/app/src/main/assets/mascota.png')}
            style={styles.mascotImage}
            resizeMode="contain"
          />
        </View>
        <JournalTitle style={[styles.sectionTitle, globalStyles.neonText]}>
          DAILY TASK LIST
        </JournalTitle>
        <JournalText style={styles.sectionSubtitle}>
          Organiza tu día de trabajo
        </JournalText>
      </View>

      {/* Sección de horarios */}
      <View style={styles.dailyScheduleContainer}>
        <View style={styles.timeColumn}>
          <Text style={styles.timeColumnTitle}>TASK/WORK</Text>
          {Array.from({ length: 19 }, (_, i) => {
            const hour = 6 + i;
            return (
              <View key={hour} style={styles.timeSlot}>
                <Text style={styles.timeText}>{hour.toString().padStart(2, '0')}:00</Text>
                <TextInput 
                  style={styles.timeInput}
                  placeholder="Task..."
                  placeholderTextColor={colors.textTertiary}
                />
              </View>
            );
          })}
        </View>

        <View style={styles.categoriesColumn}>
          <View style={styles.categoriesTable}>
            <View style={styles.categoriesHeader}>
              <Text style={styles.categoriesHeaderText}>PRIORITIES</Text>
              <Text style={styles.categoriesHeaderText}>UNDERTAKING</Text>
              <Text style={styles.categoriesHeaderText}>APPOINT</Text>
            </View>
            {Array.from({ length: 5 }, (_, i) => (
              <View key={i} style={styles.categoriesRow}>
                <TextInput 
                  style={styles.categoriesInput}
                  placeholder="Priority..."
                  placeholderTextColor={colors.textTertiary}
                />
                <TextInput 
                  style={styles.categoriesInput}
                  placeholder="Undertaking..."
                  placeholderTextColor={colors.textTertiary}
                />
                <TextInput 
                  style={styles.categoriesInput}
                  placeholder="Appointment..."
                  placeholderTextColor={colors.textTertiary}
                />
              </View>
            ))}
          </View>

          <View style={styles.noteBox}>
            <Text style={styles.noteTitle}>NOTE</Text>
            <TextInput 
              style={styles.noteInput}
              placeholder="Write your notes here..."
              placeholderTextColor={colors.textTertiary}
              multiline
              numberOfLines={6}
            />
          </View>
        </View>
      </View>
        
        <View style={styles.sectionContent}>
        
        {/* Caja de texto para capturar nueva tarea diaria */}
        <View style={styles.addTaskContainer}>
          <TextInput
            style={styles.newTaskInput}
            placeholder="Escribe una nueva tarea diaria..."
            value={newDailyTaskText}
            onChangeText={setNewDailyTaskText}
            onSubmitEditing={addDailyTask}
            returnKeyType="done"
          />
          <TouchableOpacity 
            style={styles.iconButton}
            onPress={() => setShowDailyDatePicker(true)}
          >
            <Icon name="calendar-outline" size={20} color="#007AFF" />
          </TouchableOpacity>
          <TouchableOpacity 
            style={styles.iconButton}
            onPress={() => setShowDailyTimePicker(true)}
          >
            <Icon name="time-outline" size={20} color="#007AFF" />
          </TouchableOpacity>
          <TouchableOpacity onPress={addDailyTask} style={styles.addTaskButton}>
            <Icon name="add" size={20} color="#FFFFFF" />
          </TouchableOpacity>
        </View>

        {/* Lista de tareas diarias */}
        <View style={styles.tasksList}>
          {allDailyTasks.length === 0 ? (
            <View style={styles.emptyState}>
              <Icon name="calendar-outline" size={48} color="#dee2e6" />
              <Text style={styles.emptyText}>No hay tareas diarias</Text>
              <Text style={styles.emptySubtext}>Agrega una tarea arriba y toca el botón +</Text>
            </View>
          ) : (
            allDailyTasks.map((task, index) => {
              const taskDate = task.date;
              const taskIndex = dailyTasks[taskDate]?.findIndex(t => t.id === task.id) || 0;
              
              return (
                <View key={task.id} style={[styles.taskListItem, task.completed && styles.completedTaskListItem]}>
                  <TouchableOpacity
                    onPress={() => toggleDailyTaskCompleted(taskDate, taskIndex)}
                    style={styles.taskCheckbox}
                  >
                    <Icon 
                      name={task.completed ? "checkmark-circle" : "ellipse-outline"} 
                      size={24} 
                      color={task.completed ? "#28a745" : "#6c757d"} 
                    />
                  </TouchableOpacity>
                  
                  <View style={styles.taskContent}>
                    <Text style={[styles.taskText, task.completed && styles.completedTaskText]}>
                      {task.task}
                    </Text>
                    <Text style={styles.taskTime}>
                      📅 {formatDisplayDate(new Date(task.date))} 🕐 {task.time}
                    </Text>
                  </View>
                  
                  <View style={styles.taskActions}>
                    <TouchableOpacity
                      onPress={() => showDailyTaskNotes(task.notes, taskDate, taskIndex)}
                      style={[styles.notesButton, task.notes.trim() !== '' && styles.notesButtonActive]}
                    >
                      <Icon 
                        name="create-outline" 
                        size={18} 
                        color={task.notes.trim() !== '' ? "#007AFF" : "#6c757d"} 
                      />
                    </TouchableOpacity>
                    
                    <TouchableOpacity
                      onPress={() => removeDailyTask(taskDate, taskIndex)}
                      style={styles.taskDeleteButton}
                    >
                      <Icon name="trash-outline" size={18} color="#dc3545" />
                    </TouchableOpacity>
                  </View>
                </View>
              );
            })
          )}
        </View>
        </View>
      </View>
    );
  };

        <Text style={styles.sectionSubtitle}>
          Define los objetivos y estructura de tu proyecto
        </Text>
      </View>
      
      <View style={styles.sectionContent}>
        <View style={styles.projectForm}>
        <View style={styles.inputRow}>
          <Text style={styles.label}>TÍTULO DEL PROYECTO:</Text>
          <TextInput
            style={styles.textInput}
            value={projectData.title}
            onChangeText={(value) => setProjectData(prev => ({ ...prev, title: value }))}
            placeholder="Nombre del proyecto"
          />
        </View>
        
        <View style={styles.inputRow}>
          <Text style={styles.label}>OBJETIVO DEL PROYECTO:</Text>
          <TextInput
            style={[styles.textInput, styles.textArea]}
            value={projectData.aim}
            onChangeText={(value) => setProjectData(prev => ({ ...prev, aim: value }))}
            placeholder="Breve introducción del proyecto"
            multiline
            numberOfLines={3}
          />
        </View>
        
        <View style={styles.inputRow}>
          <Text style={styles.label}>FECHA DE INICIO:</Text>
          <TextInput
            style={styles.textInput}
            value={projectData.startDate}
            onChangeText={(value) => setProjectData(prev => ({ ...prev, startDate: value }))}
            placeholder="DD/MM/AAAA"
          />
          <Text style={styles.label}>FECHA LÍMITE:</Text>
          <TextInput
            style={styles.textInput}
            value={projectData.deadline}
            onChangeText={(value) => setProjectData(prev => ({ ...prev, deadline: value }))}
            placeholder="DD/MM/AAAA"
          />
        </View>
        
        
        {/* Campo para agregar nueva meta */}
        <View style={styles.addTaskContainer}>
          <TextInput
            style={styles.newTaskInput}
            placeholder="Escribe una nueva meta..."
            value={newAchievementText}
            onChangeText={setNewAchievementText}
            onSubmitEditing={addAchievement}
            returnKeyType="done"
          />
          <TouchableOpacity 
            style={styles.iconButton}
            onPress={() => {
              Alert.alert('Información', 'Primero agrega la meta, luego podrás asignar fecha y persona');
            }}
          >
            <Icon name="calendar-outline" size={20} color="#6c757d" />
          </TouchableOpacity>
          <TouchableOpacity 
            style={styles.iconButton}
            onPress={() => {
              Alert.alert('Información', 'Primero agrega la meta, luego podrás asignar fecha y persona');
            }}
          >
            <Icon name="person-outline" size={20} color="#6c757d" />
          </TouchableOpacity>
          <TouchableOpacity onPress={addAchievement} style={styles.addTaskButton}>
            <Icon name="add" size={20} color="#FFFFFF" />
          </TouchableOpacity>
        </View>

        {/* Lista de metas */}
        <View style={styles.tasksList}>
          {projectData.achievements.length === 0 ? (
            <View style={styles.emptyState}>
              <Icon name="flag-outline" size={48} color="#dee2e6" />
              <Text style={styles.emptyText}>No hay metas agregadas</Text>
              <Text style={styles.emptySubtext}>Escribe una meta arriba y toca el botón +</Text>
            </View>
          ) : (
            projectData.achievements.map((achievement, index) => (
              <View key={index} style={styles.taskListItem}>
                <View style={styles.taskContent}>
                  <Text style={styles.taskText}>
                    {achievement.name}
                  </Text>
                  <View style={styles.taskMetaInfo}>
                    {achievement.dueDate && (
                      <Text style={styles.taskMeta}>
                        📅 {achievement.dueDate}
                      </Text>
                    )}
                    {achievement.assignedPerson && (
                      <Text style={styles.taskMeta}>
                        👤 {achievement.assignedPerson}
                        {achievement.position && ` - ${achievement.position}`}
                      </Text>
                    )}
                  </View>
                </View>
                
                <View style={styles.taskActions}>
                  <TouchableOpacity
                    onPress={() => openDateModal(index)}
                    style={[styles.notesButton, achievement.dueDate && styles.notesButtonActive]}
                  >
                    <Icon 
                      name="calendar-outline" 
                      size={18} 
                      color={achievement.dueDate ? "#007AFF" : "#6c757d"} 
                    />
                  </TouchableOpacity>
                  
                  <TouchableOpacity
                    onPress={() => openPersonModal(index)}
                    style={[styles.notesButton, achievement.assignedPerson && styles.notesButtonActive]}
                  >
                    <Icon 
                      name="person-outline" 
                      size={18} 
                      color={achievement.assignedPerson ? "#28a745" : "#6c757d"} 
                    />
                  </TouchableOpacity>
                  
                  <TouchableOpacity
                    onPress={() => removeAchievement(index)}
                    style={styles.taskDeleteButton}
                  >
                    <Icon name="trash-outline" size={18} color="#dc3545" />
                  </TouchableOpacity>
                </View>
              </View>
            ))
          )}
        </View>
        </View>
      </View>
    </View>
  );

  const renderProjectStrategy = () => (
    <View style={styles.section}>
      <View style={styles.sectionHeader}>
        <View style={styles.headerDecoration}>
          <Image 
            source={require('../../android/app/src/main/assets/mascota.png')}
            style={styles.mascotImage}
            resizeMode="contain"
          />
        </View>
        <JournalTitle style={[styles.sectionTitle, globalStyles.neonText]}>
          PROJECT STRATEGY
        </JournalTitle>
        <JournalText style={styles.sectionSubtitle}>
          Define la estrategia de tu proyecto
        </JournalText>
      </View>

      {/* Formulario de Project Strategy */}
      <View style={styles.strategyForm}>
        <View style={styles.formRow}>
          <Text style={styles.formLabel}>PROJECT TITLE:</Text>
          <TextInput 
            style={styles.formInput}
            placeholder="Enter project title..."
            placeholderTextColor={colors.textTertiary}
            value={projectData.title}
            onChangeText={(text) => setProjectData(prev => ({ ...prev, title: text }))}
          />
        </View>

        <View style={styles.formRow}>
          <Text style={styles.formLabel}>PROJECT AIM:</Text>
          <TextInput 
            style={styles.formInput}
            placeholder="Brief introduction of the project..."
            placeholderTextColor={colors.textTertiary}
            value={projectData.aim}
            onChangeText={(text) => setProjectData(prev => ({ ...prev, aim: text }))}
          />
        </View>

        <View style={styles.formRow}>
          <Text style={styles.formLabel}>START DATE:</Text>
          <TextInput 
            style={styles.formInput}
            placeholder="Enter start date..."
            placeholderTextColor={colors.textTertiary}
            value={projectData.startDate}
            onChangeText={(text) => setProjectData(prev => ({ ...prev, startDate: text }))}
          />
        </View>

        <View style={styles.formRow}>
          <Text style={styles.formLabel}>DEADLINE:</Text>
          <TextInput 
            style={styles.formInput}
            placeholder="Enter deadline..."
            placeholderTextColor={colors.textTertiary}
            value={projectData.deadline}
            onChangeText={(text) => setProjectData(prev => ({ ...prev, deadline: text }))}
          />
        </View>

        {/* Tabla de Team Members */}
        <View style={styles.tableContainer}>
          <Text style={styles.tableTitle}>TEAMMATES:</Text>
          <View style={styles.tableHeader}>
            <Text style={styles.tableHeaderText}>STT</Text>
            <Text style={styles.tableHeaderText}>POSITION</Text>
            <Text style={styles.tableHeaderText}>NAME</Text>
          </View>
          {projectData.teammates.map((teammate, index) => (
            <View key={index} style={styles.tableRow}>
              <Text style={styles.sttText}>{index + 1}</Text>
              <TextInput 
                style={styles.tableInput}
                placeholder="Position..."
                placeholderTextColor={colors.textTertiary}
                value={teammate.position}
                onChangeText={(text) => updateTeammate(index, 'position', text)}
              />
              <TextInput 
                style={styles.tableInput}
                placeholder="Name..."
                placeholderTextColor={colors.textTertiary}
                value={teammate.name}
                onChangeText={(text) => updateTeammate(index, 'name', text)}
              />
            </View>
          ))}
          <TouchableOpacity style={styles.addButton} onPress={addTeammate}>
            <Text style={styles.addButtonText}>+ Add Teammate</Text>
          </TouchableOpacity>
        </View>

        {/* Tabla de Achievements */}
        <View style={styles.tableContainer}>
          <Text style={styles.tableTitle}>ACHIEVEMENTS:</Text>
          <View style={styles.tableHeader}>
            <Text style={styles.tableHeaderText}>STT</Text>
            <Text style={styles.tableHeaderText}>ACHIEVEMENT NAME</Text>
            <Text style={styles.tableHeaderText}>DUE DATE</Text>
          </View>
          {projectData.achievements.map((achievement, index) => (
            <View key={index} style={styles.tableRow}>
              <Text style={styles.sttText}>{index + 1}</Text>
              <TextInput 
                style={styles.tableInput}
                placeholder="Achievement name..."
                placeholderTextColor={colors.textTertiary}
                value={achievement.name}
                onChangeText={(text) => updateAchievement(index, 'name', text)}
              />
              <TextInput 
                style={styles.tableInput}
                placeholder="Due date..."
                placeholderTextColor={colors.textTertiary}
                value={achievement.dueDate}
                onChangeText={(text) => updateAchievement(index, 'dueDate', text)}
              />
            </View>
          ))}
          <TouchableOpacity style={styles.addButton} onPress={addAchievement}>
            <Text style={styles.addButtonText}>+ Add Achievement</Text>
          </TouchableOpacity>
        </View>

        {/* Botón de acción */}
        <TouchableOpacity style={styles.useJournalButton}>
          <Text style={styles.useJournalButtonText}>Usar este diario</Text>
        </TouchableOpacity>
      </View>
    </View>
  );

  const renderProjectOverview = () => (
    <View style={styles.section}>
      <View style={styles.sectionHeader}>
        <View style={styles.headerDecoration}>
          <Image 
            source={require('../../android/app/src/main/assets/mascota.png')}
            style={styles.mascotImage}
            resizeMode="contain"
          />
        </View>
        <JournalTitle style={[styles.sectionTitle, globalStyles.neonText]}>
          PROJECT OVERVIEW
        </JournalTitle>
        <JournalText style={styles.sectionSubtitle}>
          Información general del proyecto
        </JournalText>
      </View>
      
      <View style={styles.sectionContent}>
        {projects.length === 0 ? (
        <View style={styles.emptyState}>
          <Icon name="folder-outline" size={48} color="#dee2e6" />
          <Text style={styles.emptyText}>No hay proyectos creados</Text>
          <Text style={styles.emptySubtext}>Toca el botón + para crear tu primer proyecto</Text>
        </View>
      ) : (
        <View style={styles.projectsGrid}>
          {projects.map((project) => (
            <View key={project.id} style={styles.projectCard}>
              <View style={styles.projectCardHeader}>
                <Text style={styles.projectCardTitle}>{project.name}</Text>
                <TouchableOpacity
                  onPress={() => removeProject(project.id)}
                  style={styles.projectDeleteButton}
                >
                  <Icon name="close" size={16} color="#dc3545" />
                </TouchableOpacity>
              </View>
              
              {project.description && (
                <Text style={styles.projectCardDescription}>{project.description}</Text>
              )}
              
              {project.deadline && (
                <View style={styles.projectCardMeta}>
                  <Icon name="calendar-outline" size={14} color="#6c757d" />
                  <Text style={styles.projectCardMetaText}>Vence: {project.deadline}</Text>
                </View>
              )}
              
              <View style={styles.projectCardMeta}>
                <Icon name="flag-outline" size={14} color="#6c757d" />
                <Text style={styles.projectCardMetaText}>
                  {project.goals.length} meta{project.goals.length !== 1 ? 's' : ''}
                </Text>
              </View>
              
              <View style={styles.projectCardMeta}>
                <Icon name="time-outline" size={14} color="#6c757d" />
                <Text style={styles.projectCardMetaText}>
                  Creado: {new Date(project.createdAt).toLocaleDateString()}
                </Text>
              </View>
            </View>
          ))}
        </View>
      )}
        
        <TouchableOpacity 
          onPress={() => setShowAddProjectModal(true)}
          style={styles.addProjectButton}
        >
          <Icon name="add" size={20} color="#FFFFFF" />
          <Text style={styles.addProjectButtonText}>Nuevo Proyecto</Text>
        </TouchableOpacity>
    </View>
    </View>
  );

  const renderPriorities = () => (
    <View style={styles.section}>
      <View style={styles.sectionHeader}>
        <Text style={styles.sectionTitle}>PRIORIDADES</Text>
        <Text style={styles.sectionSubtitle}>
          Define y gestiona tus prioridades clave
        </Text>
      </View>
      
      <View style={styles.sectionContent}>
        {/* Caja de texto para capturar nueva prioridad */}
        <View style={styles.addTaskContainer}>
          <TextInput
            style={styles.newTaskInput}
            placeholder="Escribe una nueva prioridad..."
            value={newPriorityText}
            onChangeText={setNewPriorityText}
            onSubmitEditing={async () => {
              if (newPriorityText.trim() !== '' && priorityList.length < 5) {
                const newPriorityList = [...priorityList, { id: Date.now(), text: newPriorityText.trim(), completed: false }];
                setPriorityList(newPriorityList);
                setNewPriorityText('');
                
                // Guardar en Supabase
                await saveWorkData({
                  priorities: newPriorityList
                });
              }
            }}
            returnKeyType="done"
          />
          <TouchableOpacity 
            onPress={async () => {
              if (newPriorityText.trim() !== '' && priorityList.length < 5) {
                const newPriorityList = [...priorityList, { id: Date.now(), text: newPriorityText.trim(), completed: false }];
                setPriorityList(newPriorityList);
                setNewPriorityText('');
                
                // Guardar en Supabase
                await saveWorkData({
                  priorities: newPriorityList
                });
              }
            }} 
            style={styles.addTaskButton}
          >
            <Icon name="add" size={20} color="#FFFFFF" />
          </TouchableOpacity>
        </View>

      {priorityList.length === 0 ? (
        <View style={styles.emptyPrioritiesState}>
          <Icon name="flag-outline" size={64} color="#dee2e6" />
          <Text style={styles.emptyPrioritiesText}>No hay prioridades definidas</Text>
          <Text style={styles.emptyPrioritiesSubtext}>Escribe una prioridad arriba y toca el botón +</Text>
        </View>
      ) : (
        <View style={styles.prioritiesContainer}>
          {priorityList.map((priority, index) => (
            <View key={priority.id} style={[
              styles.priorityCard,
              { borderLeftColor: priorityColors[index % priorityColors.length] },
              priority.completed && styles.completedPriorityCard
            ]}>
                <View style={styles.priorityCardHeader}>
                  <View style={styles.priorityContentContainer}>
                    <Text style={[
                      styles.priorityNumber,
                      { backgroundColor: priorityColors[index % priorityColors.length] }
                    ]}>
                      {index + 1}
                    </Text>
                    <TextInput
                      style={[
                        styles.priorityTextInput,
                        priority.completed && styles.completedPriorityText
                      ]}
                      value={priority.text}
                      onChangeText={(text) => {
                        const newList = priorityList.map(p => 
                          p.id === priority.id ? { ...p, text } : p
                        );
                        setPriorityList(newList);
                      }}
                      placeholder={`Prioridad ${index + 1}...`}
                      multiline
                      numberOfLines={2}
                      textAlignVertical="top"
                    />
                  </View>
                  <View style={styles.priorityActions}>
                    <TouchableOpacity
                      onPress={() => {
                        const newList = priorityList.map(p => 
                          p.id === priority.id ? { ...p, completed: !p.completed } : p
                        );
                        setPriorityList(newList);
                      }}
                      style={[
                        styles.priorityCheckbox,
                        priority.completed && styles.priorityCheckboxCompleted
                      ]}
                    >
                      {priority.completed && <Icon name="checkmark" size={16} color="#FFFFFF" />}
                    </TouchableOpacity>
                    <TouchableOpacity
                      onPress={() => {
                        setPriorityList(priorityList.filter(p => p.id !== priority.id));
                      }}
                      style={styles.priorityDeleteButton}
                    >
                      <Icon name="close" size={16} color="#dc3545" />
                    </TouchableOpacity>
                  </View>
                </View>
              
            </View>
          ))}
        </View>
      )}
    </View>
    </View>
  );

  const renderFocus = () => (
    <View style={styles.section}>
      <View style={styles.sectionHeader}>
        <Text style={styles.sectionTitle}>Enfoque</Text>
        <Text style={styles.sectionSubtitle}>
          Define tus áreas de enfoque y concentración
        </Text>
      </View>
      
      <View style={styles.sectionContent}>
        {/* Caja de texto para capturar nuevo enfoque */}
        <View style={styles.addTaskContainer}>
          <TextInput
            style={styles.newTaskInput}
            placeholder="Escribe un nuevo enfoque..."
            value={newFocusText}
            onChangeText={setNewFocusText}
            onSubmitEditing={async () => {
              if (newFocusText.trim() !== '' && focusList.length < 5) {
                const newFocusList = [...focusList, { id: Date.now(), text: newFocusText.trim(), completed: false }];
                setFocusList(newFocusList);
                setNewFocusText('');
                
                // Guardar en Supabase
                await saveWorkData({
                  focus: newFocusList
                });
              }
            }}
            returnKeyType="done"
          />
          <TouchableOpacity 
            onPress={async () => {
              if (newFocusText.trim() !== '' && focusList.length < 5) {
                const newFocusList = [...focusList, { id: Date.now(), text: newFocusText.trim(), completed: false }];
                setFocusList(newFocusList);
                setNewFocusText('');
                
                // Guardar en Supabase
                await saveWorkData({
                  focus: newFocusList
                });
              }
            }} 
            style={styles.addTaskButton}
          >
            <Icon name="add" size={20} color="#FFFFFF" />
          </TouchableOpacity>
        </View>

        {focusList.length === 0 ? (
        <View style={styles.emptyFocusState}>
          <Icon name="bulb-outline" size={64} color="#dee2e6" />
          <Text style={styles.emptyFocusText}>No hay enfoques definidos</Text>
          <Text style={styles.emptyFocusSubtext}>Escribe un enfoque arriba y toca el botón +</Text>
        </View>
      ) : (
        <View style={styles.focusContainer}>
          {focusList.map((focusItem, index) => (
            <View key={focusItem.id} style={[
              styles.focusCard,
              { borderLeftColor: focusColors[index % focusColors.length] },
              focusItem.completed && styles.completedFocusCard
            ]}>
              <View style={styles.focusCardHeader}>
                <View style={styles.focusContentContainer}>
                  <Text style={[
                    styles.focusNumber,
                    { backgroundColor: focusColors[index % focusColors.length] }
                  ]}>
                    {index + 1}
                  </Text>
                  <TextInput
                    style={[
                      styles.focusTextInput,
                      focusItem.completed && styles.completedFocusText
                    ]}
                    value={focusItem.text}
                    onChangeText={(text) => {
                      const newList = focusList.map(f => 
                        f.id === focusItem.id ? { ...f, text } : f
                      );
                      setFocusList(newList);
                    }}
                    placeholder={`Enfoque ${index + 1}...`}
                    multiline
                    numberOfLines={2}
                    textAlignVertical="top"
                  />
                </View>
                <View style={styles.focusActions}>
                  <TouchableOpacity
                    onPress={() => {
                      const newList = focusList.map(f => 
                        f.id === focusItem.id ? { ...f, completed: !f.completed } : f
                      );
                      setFocusList(newList);
                    }}
                    style={[
                      styles.focusCheckbox,
                      focusItem.completed && styles.focusCheckboxCompleted
                    ]}
                  >
                    {focusItem.completed && <Icon name="checkmark" size={16} color="#FFFFFF" />}
                  </TouchableOpacity>
                  <TouchableOpacity
                    onPress={() => {
                      setFocusList(focusList.filter(f => f.id !== focusItem.id));
                    }}
                    style={styles.focusDeleteButton}
                  >
                    <Icon name="close" size={16} color="#dc3545" />
                  </TouchableOpacity>
                </View>
              </View>
            </View>
          ))}
        </View>
      )}
    </View>
    </View>
  );

  const renderGoals = () => (
    <View style={styles.section}>
      <View style={styles.sectionHeader}>
        <Text style={styles.sectionTitle}>Objetivos</Text>
        <Text style={styles.sectionSubtitle}>
          Define y gestiona tus objetivos de trabajo
        </Text>
      </View>
      
      <View style={styles.sectionContent}>
        {/* Caja de texto para capturar nuevo objetivo */}
        <View style={styles.addTaskContainer}>
          <TextInput
            style={styles.newTaskInput}
            placeholder="Escribe un nuevo objetivo..."
            value={newGoalText}
            onChangeText={setNewGoalText}
            onSubmitEditing={async () => {
              if (newGoalText.trim() !== '' && goalsList.length < 5) {
                const newGoalsList = [...goalsList, { id: Date.now(), text: newGoalText.trim(), completed: false }];
                setGoalsList(newGoalsList);
                setNewGoalText('');
                
                // Guardar en Supabase
                await saveWorkData({
                  goals: newGoalsList
                });
              }
            }}
            returnKeyType="done"
          />
          <TouchableOpacity 
            onPress={async () => {
              if (newGoalText.trim() !== '' && goalsList.length < 5) {
                const newGoalsList = [...goalsList, { id: Date.now(), text: newGoalText.trim(), completed: false }];
                setGoalsList(newGoalsList);
                setNewGoalText('');
                
                // Guardar en Supabase
                await saveWorkData({
                  goals: newGoalsList
                });
              }
            }} 
            style={styles.addTaskButton}
          >
            <Icon name="add" size={20} color="#FFFFFF" />
          </TouchableOpacity>
        </View>

        {goalsList.length === 0 ? (
        <View style={styles.emptyGoalsState}>
          <Icon name="trophy-outline" size={64} color="#dee2e6" />
          <Text style={styles.emptyGoalsText}>No hay objetivos definidos</Text>
          <Text style={styles.emptyGoalsSubtext}>Escribe un objetivo arriba y toca el botón +</Text>
        </View>
      ) : (
        <View style={styles.goalsContainer}>
          {goalsList.map((goal, index) => (
            <View key={goal.id} style={[
              styles.goalCard,
              { borderLeftColor: goalsColors[index % goalsColors.length] },
              goal.completed && styles.completedGoalCard
            ]}>
              <View style={styles.goalCardHeader}>
                <View style={styles.goalContentContainer}>
                  <Text style={[
                    styles.goalNumber,
                    { backgroundColor: goalsColors[index % goalsColors.length] }
                  ]}>
                    {index + 1}
                  </Text>
                  <TextInput
                    style={[
                      styles.goalTextInput,
                      goal.completed && styles.completedGoalText
                    ]}
                    value={goal.text}
                    onChangeText={(text) => {
                      const newList = goalsList.map(g => 
                        g.id === goal.id ? { ...g, text } : g
                      );
                      setGoalsList(newList);
                    }}
                    placeholder={`Objetivo ${index + 1}...`}
                    multiline
                    numberOfLines={2}
                    textAlignVertical="top"
                  />
                </View>
                <View style={styles.goalActions}>
                  <TouchableOpacity
                    onPress={() => {
                      const newList = goalsList.map(g => 
                        g.id === goal.id ? { ...g, completed: !g.completed } : g
                      );
                      setGoalsList(newList);
                    }}
                    style={[
                      styles.goalCheckbox,
                      goal.completed && styles.goalCheckboxCompleted
                    ]}
                  >
                    {goal.completed && <Icon name="checkmark" size={16} color="#FFFFFF" />}
                  </TouchableOpacity>
                  <TouchableOpacity
                    onPress={() => {
                      setGoalsList(goalsList.filter(g => g.id !== goal.id));
                    }}
                    style={styles.goalDeleteButton}
                  >
                    <Icon name="close" size={16} color="#dc3545" />
                  </TouchableOpacity>
                </View>
              </View>
            </View>
          ))}
        </View>
      )}
    </View>
    </View>
  );

  const renderActiveSection = () => {
    switch (activeSection) {
      case 'weeklyTaskList':
        return renderWeeklyTaskList();
      case 'dailyTaskList':
        return renderDailyTaskList();
      case 'projectStrategy':
        return renderProjectStrategy();
      case 'projectOverview':
        return renderProjectOverview();
      default:
        return renderWeeklyTaskList();
    }
  };

  return (
    <View style={styles.container}>
      {renderSectionTabs()}
      <ScrollView style={styles.content} showsVerticalScrollIndicator={false}>
        {renderActiveSection()}
      </ScrollView>
      
      {/* Modal para mostrar y editar notas */}
      <Modal
        visible={showNotesModal}
        animationType="fade"
        transparent={true}
        onRequestClose={closeNotesModal}
      >
        <View style={styles.modalOverlay}>
          <View style={styles.notesModalContainer}>
            <View style={styles.notesModalHeader}>
              <Text style={styles.notesModalTitle}>Notas de la Tarea</Text>
              <TouchableOpacity 
                onPress={closeNotesModal} 
                style={styles.closeNotesButton}
              >
                <Icon name="close" size={24} color="#6c757d" />
              </TouchableOpacity>
            </View>
            <View style={styles.notesModalContent}>
              <TextInput
                style={styles.notesTextInput}
                placeholder="Escribe notas adicionales para esta tarea..."
                value={selectedTaskNotes}
                onChangeText={updateTaskNotes}
                multiline
                numberOfLines={6}
                textAlignVertical="top"
              />
            </View>
            <View style={styles.notesModalFooter}>
              <TouchableOpacity 
                onPress={closeNotesModal} 
                style={styles.saveNotesButton}
              >
                <Text style={styles.saveNotesButtonText}>Guardar</Text>
              </TouchableOpacity>
            </View>
          </View>
        </View>
          </Modal>
          
          {/* Date Picker para tareas semanales */}
          {showDatePicker && (
            <DateTimePicker
              value={newTaskDate}
              mode="date"
              display={Platform.OS === 'ios' ? 'spinner' : 'default'}
              onChange={onDateChange}
              minimumDate={new Date(2020, 0, 1)}
              maximumDate={new Date(2030, 11, 31)}
            />
          )}
          
          {/* Date Picker para tareas diarias */}
          {showDailyDatePicker && (
            <DateTimePicker
              value={newDailyTaskDate}
              mode="date"
              display={Platform.OS === 'ios' ? 'spinner' : 'default'}
              onChange={onDailyDateChange}
              minimumDate={new Date(2020, 0, 1)}
              maximumDate={new Date(2030, 11, 31)}
            />
          )}
          
          {/* Time Picker para tareas diarias */}
          {showDailyTimePicker && (
            <DateTimePicker
              value={newDailyTaskTime}
              mode="time"
              display={Platform.OS === 'ios' ? 'spinner' : 'default'}
              onChange={onDailyTimeChange}
            />
          )}
          
          {/* Modal para notas de tareas diarias */}
          <Modal
            visible={showDailyNotesModal}
            animationType="fade"
            transparent={true}
            onRequestClose={closeDailyNotesModal}
          >
            <View style={styles.modalOverlay}>
              <View style={styles.notesModalContainer}>
                <View style={styles.notesModalHeader}>
                  <Text style={styles.notesModalTitle}>Notas de la Tarea Diaria</Text>
                  <TouchableOpacity 
                    onPress={closeDailyNotesModal} 
                    style={styles.closeNotesButton}
                  >
                    <Icon name="close" size={24} color="#6c757d" />
                  </TouchableOpacity>
                </View>
                <View style={styles.notesModalContent}>
                  <TextInput
                    style={styles.notesTextInput}
                    placeholder="Escribe notas adicionales para esta tarea..."
                    value={selectedDailyTaskNotes}
                    onChangeText={updateDailyTaskNotes}
                    multiline
                    numberOfLines={6}
                    textAlignVertical="top"
                  />
                </View>
                <View style={styles.notesModalFooter}>
                  <TouchableOpacity 
                    onPress={closeDailyNotesModal} 
                    style={styles.saveNotesButton}
                  >
                    <Text style={styles.saveNotesButtonText}>Guardar</Text>
                  </TouchableOpacity>
                </View>
              </View>
            </View>
          </Modal>
          
          {/* Modal para fecha de meta */}
          <Modal
            visible={showDateModal}
            animationType="fade"
            transparent={true}
            onRequestClose={() => setShowDateModal(false)}
          >
            <View style={styles.modalOverlay}>
              <View style={styles.notesModalContainer}>
                <View style={styles.notesModalHeader}>
                  <Text style={styles.notesModalTitle}>📅 Fecha de Vencimiento</Text>
                  <TouchableOpacity 
                    onPress={() => setShowDateModal(false)} 
                    style={styles.closeNotesButton}
                  >
                    <Icon name="close" size={24} color="#6c757d" />
                  </TouchableOpacity>
                </View>
                <View style={styles.notesModalContent}>
                  <DateTimePicker
                    value={tempDate ? new Date(tempDate) : new Date()}
                    mode="date"
                    display={Platform.OS === 'ios' ? 'default' : 'default'}
                    onChange={(event, selectedDate) => {
                      if (event.type === 'set' && selectedDate) {
                        const dateString = selectedDate.toISOString().split('T')[0];
                        setTempDate(dateString);
                        setShowDateModal(false);
                        // Guardar la fecha inmediatamente
                        if (editingAchievementIndex !== null) {
                          updateAchievement(editingAchievementIndex, 'dueDate', dateString);
                        }
                      }
                    }}
                    style={styles.datePicker}
                  />
                </View>
                <View style={styles.notesModalFooter}>
                  <TouchableOpacity 
                    onPress={saveDate} 
                    style={styles.saveNotesButton}
                  >
                    <Text style={styles.saveNotesButtonText}>Guardar</Text>
                  </TouchableOpacity>
                </View>
              </View>
            </View>
          </Modal>
          
          {/* Modal para persona asignada */}
          <Modal
            visible={showPersonModal}
            animationType="fade"
            transparent={true}
            onRequestClose={() => setShowPersonModal(false)}
          >
            <View style={styles.modalOverlay}>
              <View style={styles.notesModalContainer}>
                <View style={styles.notesModalHeader}>
                  <Text style={styles.notesModalTitle}>👤 Persona Asignada</Text>
                  <TouchableOpacity 
                    onPress={() => setShowPersonModal(false)} 
                    style={styles.closeNotesButton}
                  >
                    <Icon name="close" size={24} color="#6c757d" />
                  </TouchableOpacity>
                </View>
                <View style={styles.notesModalContent}>
                  <TextInput
                    style={[styles.notesTextInput, { marginBottom: 16 }]}
                    placeholder="Nombre de la persona"
                    value={tempPerson}
                    onChangeText={setTempPerson}
                  />
                  <TextInput
                    style={styles.notesTextInput}
                    placeholder="Posición/Rol"
                    value={tempPosition}
                    onChangeText={setTempPosition}
                  />
                </View>
                <View style={styles.notesModalFooter}>
                  <TouchableOpacity 
                    onPress={savePerson} 
                    style={styles.saveNotesButton}
                  >
                    <Text style={styles.saveNotesButtonText}>Guardar</Text>
                  </TouchableOpacity>
                </View>
              </View>
            </View>
          </Modal>
          
          {/* Modal para agregar proyecto */}
          <Modal
            visible={showAddProjectModal}
            animationType="fade"
            transparent={true}
            onRequestClose={() => setShowAddProjectModal(false)}
          >
            <View style={styles.modalOverlay}>
              <ScrollView 
                horizontal={true} 
                showsHorizontalScrollIndicator={true}
                contentContainerStyle={styles.horizontalScrollContainer}
              >
                <View style={styles.projectModalContainer}>
                  <View style={styles.notesModalHeader}>
                    <Text style={styles.notesModalTitle}>📁 Nuevo Proyecto</Text>
                    <TouchableOpacity 
                      onPress={() => setShowAddProjectModal(false)} 
                      style={styles.closeNotesButton}
                    >
                      <Icon name="close" size={24} color="#6c757d" />
                    </TouchableOpacity>
                  </View>
                  
                  <ScrollView style={styles.projectModalContent} showsVerticalScrollIndicator={false}>
                  {/* Información básica del proyecto */}
                  <View style={styles.formSection}>
                    <View style={styles.formField}>
                      <Text style={styles.formLabel}>Nombre del Proyecto *</Text>
                      <View style={styles.projectNameContainer}>
                        <TextInput
                          style={styles.formInput}
                          value={newProjectName}
                          onChangeText={setNewProjectName}
                          placeholder="Ingresa el nombre del proyecto"
                        />
                        <TouchableOpacity
                          onPress={() => {
                            // Abrir DateTimePicker directamente sin modal
                            setShowProjectDeadlineModal(true);
                          }}
                          style={styles.projectDeadlineButton}
                        >
                          <Icon name="calendar-outline" size={20} color="#007AFF" />
                        </TouchableOpacity>
                      </View>
                      {newProjectDeadline && (
                        <Text style={styles.deadlineText}>
                          📅 Fecha límite: {newProjectDeadline}
                        </Text>
                      )}
                    </View>
                    
                    <View style={styles.formField}>
                      <Text style={styles.formLabel}>Descripción</Text>
                      <TextInput
                        style={[styles.formInput, styles.formTextArea]}
                        value={newProjectDescription}
                        onChangeText={setNewProjectDescription}
                        placeholder="Describe brevemente el proyecto"
                        multiline
                        numberOfLines={3}
                        textAlignVertical="top"
                      />
                    </View>
                  </View>

                  {/* Metas del proyecto */}
                  <View style={styles.formSection}>
                    <View style={styles.formSectionHeader}>
                      <Text style={styles.formSectionTitle}>🎯 Metas del Proyecto</Text>
                    </View>
                    
                    <View style={styles.addTaskContainer}>
                      <TextInput
                        style={styles.newTaskInput}
                        placeholder="Escribe una nueva meta..."
                        value={newProjectGoalText}
                        onChangeText={setNewProjectGoalText}
                        onSubmitEditing={addProjectGoal}
                        returnKeyType="done"
                      />
                      <TouchableOpacity 
                        style={styles.iconButton}
                        onPress={() => {
                          if (newProjectGoalText.trim() === '') {
                            Alert.alert('Información', 'Primero escribe el texto de la meta');
                            return;
                          }
                          // Abrir DateTimePicker directo para la meta que se está escribiendo
                          setTempProjectDate('');
                          setShowProjectDateModal(true);
                        }}
                      >
                        <Icon name="calendar-outline" size={20} color="#007AFF" />
                      </TouchableOpacity>
                      <TouchableOpacity 
                        style={styles.iconButton}
                        onPress={() => {
                          if (newProjectGoalText.trim() === '') {
                            Alert.alert('Información', 'Primero escribe el texto de la meta');
                            return;
                          }
                          // Abrir modal de persona para la meta que se está escribiendo
                          setTempProjectPerson('');
                          setShowProjectPersonModal(true);
                        }}
                      >
                        <Icon name="person-outline" size={20} color="#28a745" />
                      </TouchableOpacity>
                      <TouchableOpacity 
                        onPress={addProjectGoal}
                        style={styles.addTaskButton}
                      >
                        <Icon name="add" size={20} color="#FFFFFF" />
                      </TouchableOpacity>
                    </View>
                    
                    {newProjectGoals.length === 0 ? (
                      <View style={styles.emptyGoalsState}>
                        <Icon name="flag-outline" size={48} color="#dee2e6" />
                        <Text style={styles.emptyGoalsText}>No hay metas agregadas</Text>
                        <Text style={styles.emptyGoalsSubtext}>Escribe una meta arriba y presiona Enter</Text>
                      </View>
                    ) : (
                      newProjectGoals.map((goal, index) => (
                        <View key={goal.id} style={styles.goalCard}>
                          <View style={styles.goalCardHeader}>
                            <Text style={styles.goalNumber}>Meta {index + 1}</Text>
                            <TouchableOpacity
                              onPress={() => removeProjectGoal(goal.id)}
                              style={styles.removeGoalButton}
                            >
                              <Icon name="close" size={16} color="#dc3545" />
                            </TouchableOpacity>
                          </View>
                          
                          <View style={styles.formField}>
                            <Text style={styles.goalText}>{goal.name}</Text>
                            {(goal.dueDate || goal.assignedPerson) && (
                              <View style={styles.goalDateContainer}>
                                {goal.dueDate && (
                                  <>
                                    <Text style={styles.goalDateText}>📅 {goal.dueDate}</Text>
                                  </>
                                )}
                                
                                {goal.assignedPerson && (
                                  <>
                                    <Text style={styles.goalDateText}>👤 {goal.assignedPerson}</Text>
                                  </>
                                )}
                              </View>
                            )}
                          </View>
                        </View>
                      ))
                    )}
                  </View>
                </ScrollView>
                
                <View style={styles.notesModalFooter}>
                  <TouchableOpacity 
                    onPress={addProject} 
                    style={styles.saveNotesButton}
                  >
                    <Text style={styles.saveNotesButtonText}>Crear Proyecto</Text>
                  </TouchableOpacity>
                </View>
                </View>
              </ScrollView>
            </View>
          </Modal>
          
          
          {/* Modal para persona asignada de meta del proyecto */}
          <Modal
            visible={showProjectPersonModal}
            animationType="fade"
            transparent={true}
            onRequestClose={() => setShowProjectPersonModal(false)}
          >
            <View style={styles.modalOverlay}>
              <View style={styles.notesModalContainer}>
                <View style={styles.notesModalHeader}>
                  <Text style={styles.notesModalTitle}>👤 Persona Asignada</Text>
                  <TouchableOpacity 
                    onPress={() => setShowProjectPersonModal(false)} 
                    style={styles.closeNotesButton}
                  >
                    <Icon name="close" size={24} color="#6c757d" />
                  </TouchableOpacity>
                </View>
                <View style={styles.notesModalContent}>
                  <View style={styles.simplePersonFormContainer}>
                    <View style={styles.simplePersonInputGroup}>
                      <TextInput
                        style={styles.simplePersonTextInput}
                        placeholder="Nombre de la persona"
                        value={tempProjectPerson || ''}
                        onChangeText={(text) => {
                          try {
                            console.log('Actualizando nombre:', text);
                            setTempProjectPerson(text);
                          } catch (error) {
                            console.error('Error al actualizar nombre:', error);
                          }
                        }}
                        autoCapitalize="words"
                        maxLength={50}
                        keyboardType="default"
                        returnKeyType="done"
                        multiline={false}
                        numberOfLines={1}
                      />
                    </View>
                  </View>
                </View>
                <View style={styles.notesModalFooter}>
                  <TouchableOpacity 
                    onPress={() => setShowProjectPersonModal(false)}
                    style={styles.cancelPersonButton}
                  >
                    <Text style={styles.cancelPersonButtonText}>Cancelar</Text>
                  </TouchableOpacity>
                  <TouchableOpacity 
                    onPress={saveProjectPerson} 
                    style={styles.addPersonButton}
                  >
                    <Icon name="person-add" size={18} color="#FFFFFF" />
                    <Text style={styles.addPersonButtonText}>Asignar</Text>
                  </TouchableOpacity>
                </View>
              </View>
            </View>
          </Modal>
          
          {/* DateTimePicker para fecha de meta del proyecto */}
          {showProjectDateModal && (
            <DateTimePicker
              value={tempProjectDate ? new Date(tempProjectDate) : new Date()}
              mode="date"
              display={Platform.OS === 'ios' ? 'default' : 'default'}
              onChange={(event, selectedDate) => {
                if (event.type === 'set' && selectedDate) {
                  const dateString = selectedDate.toISOString().split('T')[0];
                  setTempProjectDate(dateString);
                  setShowProjectDateModal(false);
                } else if (event.type === 'dismissed') {
                  setShowProjectDateModal(false);
                }
              }}
              style={styles.datePicker}
            />
          )}
          
          {/* DateTimePicker para fecha límite del proyecto */}
          {showProjectDeadlineModal && (
            <DateTimePicker
              value={tempProjectDeadline ? new Date(tempProjectDeadline) : new Date()}
              mode="date"
              display={Platform.OS === 'ios' ? 'default' : 'default'}
              onChange={(event, selectedDate) => {
                if (event.type === 'set' && selectedDate) {
                  const dateString = selectedDate.toISOString().split('T')[0];
                  setTempProjectDeadline(dateString);
                  setNewProjectDeadline(dateString);
                  setShowProjectDeadlineModal(false);
                } else if (event.type === 'dismissed') {
                  setShowProjectDeadlineModal(false);
                }
              }}
              style={styles.datePicker}
            />
          )}
          
        </View>
      );
    };

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: '#f8f9fa',
  },
  tabsContainer: {
    backgroundColor: colors.background,
    paddingVertical: spacing.lg,
    paddingHorizontal: 0,
    width: '100%',
    ...shadows.sm,
  },
  tabsWrapper: {
    flexDirection: 'row',
    justifyContent: 'space-around',
    alignItems: 'center',
    backgroundColor: colors.background,
    padding: spacing.sm,
    width: '100%',
  },
  tab: {
    flex: 1,
    alignItems: 'center',
    justifyContent: 'center',
    paddingVertical: spacing.md,
    paddingHorizontal: spacing.sm,
    borderRadius: borderRadius.lg,
    marginHorizontal: spacing.xs,
  },
  activeTab: {
    ...shadows.lg,
    borderColor: colors.neon.blue,
    shadowColor: colors.neon.blue,
    shadowOffset: { width: 0, height: 0 },
    shadowOpacity: 0.8,
    shadowRadius: 10,
    elevation: 8,
  },
  tabContent: {
    width: 40,
    height: 40,
    borderRadius: borderRadius.full,
    justifyContent: 'center',
    alignItems: 'center',
    borderWidth: 2,
    position: 'relative',
    ...shadows.sm,
  },
  activeIndicator: {
    position: 'absolute',
    bottom: -8,
    left: '50%',
    marginLeft: -4,
    width: 8,
    height: 8,
    borderRadius: borderRadius.full,
    backgroundColor: colors.primary,
    ...shadows.sm,
  },
  content: {
    flex: 1,
    paddingHorizontal: 0, // No horizontal padding to span full width
    paddingTop: 16,
    paddingBottom: 40, // Increased bottom padding to prevent button cutoff
  },
  section: {
    backgroundColor: '#ffffff',
    borderRadius: 16,
    padding: 0,
    marginBottom: 20,
    marginHorizontal: 0, // No horizontal margin to span full width
    shadowColor: '#000',
    shadowOffset: {
      width: 0,
      height: 8,
    },
    shadowOpacity: 0.3,
    shadowRadius: 12,
    elevation: 8,
  },
  sectionHeader: {
    alignItems: 'center',
    backgroundColor: colors.background,
    padding: spacing.lg,
    marginBottom: spacing.md,
    marginHorizontal: 0,
    width: '100%',
  },
  headerDecoration: {
    flexDirection: 'row',
    alignItems: 'center',
    justifyContent: 'center',
    marginBottom: spacing.sm,
  },
  mascotImage: {
    width: 60,
    height: 60,
    borderRadius: borderRadius.full,
    ...shadows.md,
  },
  sectionTitle: {
    fontSize: typography.h3,
    fontWeight: typography.bold,
    color: colors.textPrimary,
    marginBottom: spacing.sm,
    textAlign: 'center',
    lineHeight: typography.lineHeight.tight * typography.h3,
    letterSpacing: typography.letterSpacing.normal,
    fontStyle: 'italic',
  },
  sectionSubtitle: {
    fontSize: typography.body,
    color: colors.textSecondary,
    textAlign: 'center',
    fontWeight: typography.medium,
    lineHeight: typography.lineHeight.comfortable * typography.body,
    letterSpacing: typography.letterSpacing.normal,
    fontStyle: 'italic',
  },
  addTaskHeader: {
    flexDirection: 'row',
    alignItems: 'center',
    justifyContent: 'center',
    marginBottom: spacing.lg,
    gap: spacing.sm,
  },
  addTaskTitle: {
    fontSize: typography.h4,
    fontWeight: typography.bold,
    color: colors.textPrimary,
    lineHeight: typography.lineHeight.tight * typography.h4,
    letterSpacing: typography.letterSpacing.normal,
  },
  inputContainer: {
    flexDirection: 'row',
    alignItems: 'center',
    gap: spacing.sm,
  },
  inputActions: {
    flexDirection: 'row',
    alignItems: 'center',
    gap: spacing.xs,
  },
  tasksContainer: {
    flex: 1,
    paddingHorizontal: spacing.sm,
    marginTop: spacing.md,
    zIndex: 1,
  },
  tasksStatsHeader: {
    backgroundColor: colors.surface,
    borderRadius: borderRadius.lg,
    padding: spacing.lg,
    marginBottom: spacing.lg,
    marginHorizontal: spacing.sm,
    borderWidth: 2,
    borderColor: colors.neon.blue,
    shadowColor: colors.neon.blue,
    shadowOffset: { width: 0, height: 0 },
    shadowOpacity: 0.4,
    shadowRadius: 6,
    elevation: 4,
  },
  statsContainer: {
    flexDirection: 'row',
    justifyContent: 'space-around',
    alignItems: 'center',
    marginBottom: spacing.sm,
  },
  statItem: {
    flexDirection: 'row',
    alignItems: 'center',
    gap: spacing.xs,
    backgroundColor: colors.background,
    paddingHorizontal: spacing.sm,
    paddingVertical: spacing.xs,
    borderRadius: borderRadius.md,
    borderWidth: 1,
    borderColor: colors.neon.purple,
  },
  statText: {
    fontSize: typography.caption,
    color: colors.textPrimary,
    fontWeight: typography.semiBold,
    lineHeight: typography.lineHeight.normal * typography.caption,
    letterSpacing: typography.letterSpacing.normal,
  },
  tasksScrollView: {
    flex: 1,
    paddingHorizontal: spacing.sm,
    marginTop: spacing.sm,
    zIndex: 1,
  },
  priorityIndicator: {
    flexDirection: 'row',
    alignItems: 'center',
    gap: spacing.xs,
    marginTop: spacing.xs,
  },
  priorityText: {
    fontSize: typography.small,
    color: colors.textSecondary,
    fontWeight: typography.medium,
    lineHeight: typography.lineHeight.normal * typography.small,
    letterSpacing: typography.letterSpacing.normal,
    fontStyle: 'italic',
  },
  editButton: {
    backgroundColor: colors.watercolor3,
  },
  sectionContent: {
    padding: 16,
  },
  addProjectButton: {
    flexDirection: 'row',
    alignItems: 'center',
    justifyContent: 'center',
    backgroundColor: '#FF6B6B',
    paddingHorizontal: 20,
    paddingVertical: 12,
    borderRadius: 25,
    marginTop: 16,
    marginBottom: 20,
    shadowColor: '#FF6B6B',
    shadowOffset: {
      width: 0,
      height: 4,
    },
    shadowOpacity: 0.3,
    shadowRadius: 8,
    elevation: 4,
  },
  addProjectButtonText: {
    color: '#FFFFFF',
    fontSize: 16,
    fontWeight: '600',
    marginLeft: 8,
  },
  addGoalsButton: {
    flexDirection: 'row',
    alignItems: 'center',
    justifyContent: 'center',
    backgroundColor: '#FF6B6B',
    paddingHorizontal: 20,
    paddingVertical: 12,
    borderRadius: 25,
    marginTop: 16,
    marginBottom: 20,
    shadowColor: '#FF6B6B',
    shadowOffset: {
      width: 0,
      height: 4,
    },
    shadowOpacity: 0.3,
    shadowRadius: 8,
    elevation: 4,
  },
  addGoalsButtonText: {
    color: '#FFFFFF',
    fontSize: 16,
    fontWeight: '600',
    marginLeft: 8,
  },
  addFocusButton: {
    flexDirection: 'row',
    alignItems: 'center',
    justifyContent: 'center',
    backgroundColor: '#FF6B6B',
    paddingHorizontal: 20,
    paddingVertical: 12,
    borderRadius: 25,
    marginTop: 16,
    marginBottom: 20,
    shadowColor: '#FF6B6B',
    shadowOffset: {
      width: 0,
      height: 4,
    },
    shadowOpacity: 0.3,
    shadowRadius: 8,
    elevation: 4,
  },
  addFocusButtonText: {
    color: '#FFFFFF',
    fontSize: 16,
    fontWeight: '600',
    marginLeft: 8,
  },
  addPriorityButton: {
    flexDirection: 'row',
    alignItems: 'center',
    justifyContent: 'center',
    backgroundColor: '#FF6B6B',
    paddingHorizontal: 20,
    paddingVertical: 12,
    borderRadius: 25,
    marginTop: 16,
    marginBottom: 30,
    shadowColor: '#FF6B6B',
    shadowOffset: {
      width: 0,
      height: 4,
    },
    shadowOpacity: 0.3,
    shadowRadius: 8,
    elevation: 4,
  },
  addPriorityButtonText: {
    color: '#FFFFFF',
    fontSize: 16,
    fontWeight: '600',
    marginLeft: 8,
  },
  tableContainer: {
    borderWidth: 1,
    borderColor: '#e9ecef',
    borderRadius: 8,
  },
  tableHeader: {
    flexDirection: 'row',
    backgroundColor: '#f8f9fa',
    paddingVertical: 8,
    paddingHorizontal: 8,
    borderBottomWidth: 1,
    borderBottomColor: '#e9ecef',
  },
  headerCell: {
    fontSize: 12,
    fontWeight: 'bold',
    color: '#495057',
    textAlign: 'center',
  },
  tableRow: {
    flexDirection: 'row',
    paddingVertical: 8,
    paddingHorizontal: 8,
    borderBottomWidth: 1,
    borderBottomColor: '#f8f9fa',
  },
  dayCell: {
    fontSize: 12,
    color: '#495057',
    textAlign: 'center',
    fontWeight: '500',
  },
  inputCell: {
    fontSize: 12,
    color: '#495057',
    paddingHorizontal: 4,
    textAlign: 'center',
  },
  cell: {
    fontSize: 12,
    color: '#495057',
    textAlign: 'center',
  },
  dailyContainer: {
    flex: 1,
  },
  timeSlots: {
    flex: 1,
  },
  timeSlot: {
    flexDirection: 'row',
    alignItems: 'center',
    marginBottom: 8,
  },
  timeText: {
    fontSize: 12,
    color: '#495057',
    width: 50,
    textAlign: 'center',
  },
  taskInput: {
    flex: 1,
    fontSize: 14,
    color: '#495057',
    paddingHorizontal: 12,
    paddingVertical: 8,
    borderWidth: 1,
    borderColor: '#e9ecef',
    borderRadius: 6,
    marginLeft: 12,
    backgroundColor: '#ffffff',
  },
  prioritiesTable: {
    flex: 1,
    borderWidth: 1,
    borderColor: '#e9ecef',
    borderRadius: 8,
  },
  noteBox: {
    backgroundColor: '#e3f2fd',
    borderRadius: 8,
    padding: 12,
    marginTop: 16,
  },
  noteTitle: {
    fontSize: 14,
    fontWeight: 'bold',
    color: '#1976d2',
    marginBottom: 8,
  },
  noteInput: {
    fontSize: 12,
    color: '#495057',
    textAlignVertical: 'top',
  },
  projectForm: {
    gap: 16,
  },
  inputRow: {
    gap: 8,
  },
  label: {
    fontSize: 12,
    fontWeight: 'bold',
    color: '#495057',
  },
  textInput: {
    fontSize: 14,
    color: '#495057',
    paddingHorizontal: 12,
    paddingVertical: 8,
    borderWidth: 1,
    borderColor: '#e9ecef',
    borderRadius: 6,
  },
  textArea: {
    height: 80,
    textAlignVertical: 'top',
  },
  tableSection: {
    marginTop: 16,
  },
  tableTitle: {
    fontSize: 14,
    fontWeight: 'bold',
    color: '#495057',
    flex: 1,
  },
  addButton: {
    backgroundColor: '#FF6B6B',
    width: 24,
    height: 24,
    borderRadius: 12,
    justifyContent: 'center',
    alignItems: 'center',
  },
  prioritiesContainer: {
    flexDirection: 'row',
    gap: 16,
  },
  priorityBox: {
    flex: 1,
    backgroundColor: '#fff3cd',
    borderRadius: 8,
    padding: 12,
  },
  priorityTitle: {
    fontSize: 14,
    fontWeight: 'bold',
    color: '#856404',
    marginBottom: 8,
  },
  priorityInput: {
    fontSize: 12,
    color: '#495057',
    textAlignVertical: 'top',
  },
  focusBox: {
    flex: 1,
    backgroundColor: '#d1ecf1',
    borderRadius: 8,
    padding: 12,
  },
  focusTitle: {
    fontSize: 14,
    fontWeight: 'bold',
    color: '#0c5460',
    marginBottom: 8,
  },
  focusInput: {
    fontSize: 12,
    color: '#495057',
    textAlignVertical: 'top',
  },
  priorityHeader: {
    flexDirection: 'row',
    alignItems: 'center',
    marginBottom: 8,
  },
  focusHeader: {
    flexDirection: 'row',
    alignItems: 'center',
    marginBottom: 8,
  },
  weeklyGoalsContainer: {
    marginTop: 20,
    backgroundColor: '#f8f9fa',
    borderRadius: 8,
    padding: 16,
  },
  goalsTitle: {
    fontSize: 14,
    fontWeight: 'bold',
    color: '#495057',
    marginBottom: 12,
    textAlign: 'center',
  },
  goalsGrid: {
    flexDirection: 'row',
    flexWrap: 'wrap',
    gap: 8,
  },
  goalItem: {
    flexDirection: 'row',
    alignItems: 'center',
    backgroundColor: '#ffffff',
    borderRadius: 6,
    padding: 8,
    borderWidth: 1,
    borderColor: '#e9ecef',
    flex: 1,
    minWidth: '45%',
  },
  goalNumber: {
    fontSize: 12,
    fontWeight: 'bold',
    color: '#FF6B6B',
    marginRight: 8,
    minWidth: 16,
  },
  goalInput: {
    flex: 1,
    fontSize: 11,
    color: '#495057',
    textAlignVertical: 'top',
  },
  addTaskButton: {
    backgroundColor: colors.neon.green,
    width: 40,
    height: 40,
    borderRadius: 20,
    justifyContent: 'center',
    alignItems: 'center',
    shadowColor: colors.neon.green,
    shadowOffset: { width: 0, height: 2 },
    shadowOpacity: 0.3,
    shadowRadius: 4,
    elevation: 4,
  },
  tasksList: {
    gap: 12,
  },
  emptyState: {
    alignItems: 'center',
    paddingVertical: spacing.xl,
    paddingHorizontal: spacing.lg,
  },
  emptyIconContainer: {
    position: 'relative',
    marginBottom: spacing.lg,
  },
  emptyIconDecoration: {
    position: 'absolute',
    top: -8,
    right: -8,
    width: 24,
    height: 24,
    borderRadius: borderRadius.full,
    backgroundColor: colors.accentLight,
    justifyContent: 'center',
    alignItems: 'center',
  },
  emptyIconText: {
    fontSize: 12,
  },
  emptyTitle: {
    ...typography.h3,
    color: colors.textPrimary,
    marginBottom: spacing.sm,
    textAlign: 'center',
    lineHeight: typography.lineHeight.tight,
    letterSpacing: typography.letterSpacing.tight,
  },
  emptySubtitle: {
    ...typography.body,
    color: colors.textSecondary,
    textAlign: 'center',
    paddingHorizontal: spacing.xl,
    marginBottom: spacing.lg,
    lineHeight: typography.lineHeight.relaxed,
    letterSpacing: typography.letterSpacing.normal,
  },
  emptyTipContainer: {
    flexDirection: 'row',
    alignItems: 'center',
    backgroundColor: colors.accentLight,
    paddingHorizontal: spacing.md,
    paddingVertical: spacing.sm,
    borderRadius: borderRadius.md,
  },
  emptyTip: {
    ...typography.small,
    color: colors.accent,
    marginLeft: spacing.sm,
    lineHeight: typography.lineHeight.normal,
    letterSpacing: typography.letterSpacing.normal,
  },
  taskRow: {
    flexDirection: 'row',
    alignItems: 'flex-start',
    backgroundColor: '#ffffff',
    borderRadius: 8,
    padding: 12,
    borderWidth: 1,
    borderColor: '#e9ecef',
    shadowColor: '#000',
    shadowOffset: {
      width: 0,
      height: 1,
    },
    shadowOpacity: 0.05,
    shadowRadius: 2,
    elevation: 1,
  },
  taskNumber: {
    width: 28,
    height: 28,
    borderRadius: 14,
    backgroundColor: '#FF6B6B',
    justifyContent: 'center',
    alignItems: 'center',
    marginRight: 12,
  },
  taskNumberText: {
    fontSize: 12,
    fontWeight: 'bold',
    color: '#FFFFFF',
  },
  taskContent: {
    flex: 1,
    gap: 8,
  },
  taskInput: {
    fontSize: 14,
    color: '#495057',
    paddingHorizontal: 12,
    paddingVertical: 8,
    borderWidth: 1,
    borderColor: '#e9ecef',
    borderRadius: 6,
    backgroundColor: '#f8f9fa',
  },
  notesInput: {
    fontSize: 12,
    color: '#6c757d',
    paddingHorizontal: 12,
    paddingVertical: 6,
    borderWidth: 1,
    borderColor: '#e9ecef',
    borderRadius: 4,
    backgroundColor: '#ffffff',
  },
  deleteButton: {
    width: 32,
    height: 32,
    borderRadius: 16,
    backgroundColor: '#fff5f5',
    justifyContent: 'center',
    alignItems: 'center',
    marginLeft: 8,
  },
  // Estilos para la nueva estructura simplificada
  addTaskContainer: {
    backgroundColor: colors.background,
    borderRadius: borderRadius.xl,
    padding: spacing.xl,
    marginBottom: spacing.xl,
    marginHorizontal: spacing.md,
    borderWidth: 1,
    borderColor: colors.neon.blue,
    shadowColor: colors.neon.blue,
    shadowOffset: { width: 0, height: 4 },
    shadowOpacity: 0.2,
    shadowRadius: 8,
    elevation: 6,
    zIndex: 10,
  },
  newTaskInput: {
    flex: 1,
    fontSize: typography.body,
    color: colors.textPrimary,
    paddingHorizontal: spacing.lg,
    paddingVertical: spacing.md,
    borderWidth: 1,
    borderColor: colors.neon.green,
    borderRadius: borderRadius.lg,
    backgroundColor: colors.surface,
    shadowColor: colors.neon.green,
    shadowOffset: { width: 0, height: 2 },
    shadowOpacity: 0.1,
    shadowRadius: 4,
    elevation: 2,
  },
  dateTimeContainer: {
    flexDirection: 'row',
    gap: 8,
  },
  iconButton: {
    width: 40,
    height: 40,
    borderRadius: 20,
    backgroundColor: colors.neon.blue,
    borderWidth: 1,
    borderColor: colors.neon.blue,
    justifyContent: 'center',
    alignItems: 'center',
    shadowColor: colors.neon.blue,
    shadowOffset: { width: 0, height: 2 },
    shadowOpacity: 0.2,
    shadowRadius: 4,
    elevation: 3,
  },
  taskTime: {
    fontSize: 11,
    color: '#6c757d',
    fontStyle: 'italic',
  },
  dailyTasksTitle: {
    fontSize: 16,
    fontWeight: 'bold',
    color: '#2d4150',
    marginBottom: 12,
    textAlign: 'center',
  },
  bulletJournalEntry: {
    backgroundColor: colors.card,
    borderRadius: borderRadius.lg,
    padding: spacing.lg,
    marginBottom: spacing.md,
    marginHorizontal: spacing.sm,
    borderWidth: 2,
    borderColor: colors.neon.green,
    shadowColor: colors.neon.green,
    shadowOffset: { width: 0, height: 0 },
    shadowOpacity: 0.3,
    shadowRadius: 4,
    elevation: 3,
  },
  completedEntry: {
    backgroundColor: colors.neon.green,
    opacity: 0.9,
    borderColor: colors.neon.yellow,
    shadowColor: colors.neon.yellow,
  },
  journalLine: {
    flexDirection: 'row',
    alignItems: 'flex-start',
    marginBottom: spacing.sm,
  },
  bulletSection: {
    alignItems: 'center',
    marginRight: spacing.sm,
    minWidth: 40,
  },
  bulletButton: {
    padding: spacing.xs,
    marginBottom: spacing.xs,
  },
  completedBullet: {
    width: 20,
    height: 20,
    borderRadius: 10,
    backgroundColor: colors.success,
    justifyContent: 'center',
    alignItems: 'center',
  },
  completedCheckmark: {
    color: colors.surface,
    fontSize: 12,
    fontWeight: typography.bold,
  },
  prioritySticker: {
    marginTop: spacing.xs,
  },
  taskContent: {
    flex: 1,
  },
  taskTextContainer: {
    flexDirection: 'row',
    alignItems: 'flex-start',
    marginBottom: spacing.sm,
  },
  taskText: {
    flex: 1,
    fontSize: typography.body,
    color: colors.ink,
    lineHeight: typography.lineHeight.comfortable * typography.body,
    letterSpacing: typography.letterSpacing.normal,
    fontStyle: 'italic',
  },
  completedTaskText: {
    textDecorationLine: 'line-through',
    color: colors.textTertiary,
    opacity: 0.7,
  },
  decorativeElements: {
    flexDirection: 'row',
    alignItems: 'center',
    marginLeft: spacing.sm,
    gap: spacing.xs,
  },
  journalMetaInfo: {
    flexDirection: 'row',
    flexWrap: 'wrap',
    marginBottom: spacing.sm,
    gap: spacing.md,
  },
  metaItem: {
    flexDirection: 'row',
    alignItems: 'center',
    backgroundColor: colors.watercolor1,
    paddingHorizontal: spacing.sm,
    paddingVertical: spacing.xs,
    borderRadius: borderRadius.sm,
  },
  metaText: {
    fontSize: typography.small,
    color: colors.textSecondary,
    marginLeft: spacing.xs,
    fontStyle: 'italic',
  },
  decorativeLine: {
    marginVertical: spacing.sm,
  },
  journalStatus: {
    flexDirection: 'row',
    alignItems: 'center',
    backgroundColor: colors.watercolor3,
    paddingHorizontal: spacing.sm,
    paddingVertical: spacing.xs,
    borderRadius: borderRadius.sm,
    alignSelf: 'flex-start',
  },
  statusText: {
    fontSize: typography.small,
    marginLeft: spacing.xs,
    fontStyle: 'italic',
  },
  journalActions: {
    flexDirection: 'row',
    justifyContent: 'space-between',
    alignItems: 'center',
    paddingTop: spacing.sm,
    borderTopWidth: 1,
    borderTopColor: colors.pencil,
    borderStyle: 'dashed',
  },
  progressIndicator: {
    flex: 1,
  },
  progressText: {
    fontSize: typography.small,
    color: colors.textSecondary,
    fontStyle: 'italic',
  },
  actionButtons: {
    flexDirection: 'row',
    gap: spacing.sm,
  },
  journalButton: {
    width: 36,
    height: 36,
    borderRadius: borderRadius.full,
    backgroundColor: colors.watercolor1,
    justifyContent: 'center',
    alignItems: 'center',
    ...shadows.paper,
  },
  activeButton: {
    backgroundColor: colors.highlighter,
  },
  deleteButton: {
    backgroundColor: colors.watercolor4,
  },
  taskMainHeader: {
    flexDirection: 'row',
    alignItems: 'flex-start',
    marginBottom: spacing.md,
  },
  taskLeftSection: {
    alignItems: 'center',
    marginRight: spacing.md,
  },
  taskCheckbox: {
    padding: spacing.sm,
    borderRadius: borderRadius.full,
    backgroundColor: colors.background,
    marginBottom: spacing.sm,
  },
  taskCheckboxCompleted: {
    backgroundColor: colors.successLight,
  },
  taskPriorityIndicator: {
    width: 8,
    height: 8,
    borderRadius: borderRadius.full,
    marginTop: spacing.xs,
  },
  priorityDot: {
    width: 8,
    height: 8,
    borderRadius: borderRadius.full,
  },
  taskContentSection: {
    flex: 1,
  },
  taskTitleRow: {
    flexDirection: 'row',
    justifyContent: 'space-between',
    alignItems: 'flex-start',
    marginBottom: spacing.sm,
  },
  taskTitle: {
    ...typography.h6,
    color: colors.textPrimary,
    flex: 1,
    marginRight: spacing.sm,
    lineHeight: typography.lineHeight.tight,
    letterSpacing: typography.letterSpacing.tight,
  },
  completedTaskTitle: {
    textDecorationLine: 'line-through',
    color: colors.textTertiary,
    opacity: 0.7,
  },
  priorityBadge: {
    paddingHorizontal: spacing.sm,
    paddingVertical: spacing.xs,
    borderRadius: borderRadius.sm,
    alignSelf: 'flex-start',
  },
  priorityText: {
    ...typography.small,
    fontWeight: typography.medium,
    lineHeight: typography.lineHeight.normal,
    letterSpacing: typography.letterSpacing.normal,
  },
  completedTaskListItem: {
    backgroundColor: '#f8f9fa',
    opacity: 0.7,
  },
  taskCheckbox: {
    padding: 4,
    marginRight: 12,
  },
  taskContent: {
    flex: 1,
    gap: 4,
  },
  taskMetaInfo: {
    flexDirection: 'row',
    flexWrap: 'wrap',
    marginBottom: spacing.sm,
    gap: spacing.md,
  },
  taskDateInfo: {
    flexDirection: 'row',
    alignItems: 'center',
    backgroundColor: colors.background,
    paddingHorizontal: spacing.sm,
    paddingVertical: spacing.xs,
    borderRadius: borderRadius.md,
  },
  taskDateText: {
    ...typography.small,
    color: colors.textSecondary,
    marginLeft: spacing.xs,
    lineHeight: typography.lineHeight.normal,
    letterSpacing: typography.letterSpacing.normal,
  },
  taskTimeInfo: {
    flexDirection: 'row',
    alignItems: 'center',
    backgroundColor: colors.background,
    paddingHorizontal: spacing.sm,
    paddingVertical: spacing.xs,
    borderRadius: borderRadius.md,
  },
  taskTimeText: {
    ...typography.small,
    color: colors.textSecondary,
    marginLeft: spacing.xs,
    lineHeight: typography.lineHeight.normal,
    letterSpacing: typography.letterSpacing.normal,
  },
  statusBadge: {
    flexDirection: 'row',
    alignItems: 'center',
    alignSelf: 'flex-start',
    paddingHorizontal: spacing.sm,
    paddingVertical: spacing.xs,
    borderRadius: borderRadius.md,
    marginTop: spacing.xs,
  },
  statusDot: {
    width: 6,
    height: 6,
    borderRadius: borderRadius.full,
    marginRight: spacing.xs,
  },
  statusText: {
    ...typography.small,
    fontWeight: typography.medium,
    lineHeight: typography.lineHeight.normal,
    letterSpacing: typography.letterSpacing.normal,
  },
  taskActionsSection: {
    flexDirection: 'row',
    justifyContent: 'space-between',
    alignItems: 'center',
    paddingTop: spacing.sm,
    borderTopWidth: 1,
    borderTopColor: colors.border,
  },
  taskProgressInfo: {
    flex: 1,
  },
  taskProgressText: {
    ...typography.small,
    color: colors.textSecondary,
    lineHeight: typography.lineHeight.normal,
    letterSpacing: typography.letterSpacing.normal,
  },
  taskActionButtons: {
    flexDirection: 'row',
    alignItems: 'center',
    gap: spacing.sm,
  },
  actionButton: {
    width: 40,
    height: 40,
    borderRadius: borderRadius.full,
    justifyContent: 'center',
    alignItems: 'center',
  },
  taskDeleteButton: {
    backgroundColor: colors.errorLight,
  },
  // Estilos para las acciones de la tarea
  taskActions: {
    flexDirection: 'row',
    alignItems: 'center',
    gap: 8,
  },
  notesButton: {
    backgroundColor: colors.primaryLight,
  },
  notesButtonActive: {
    backgroundColor: colors.primary,
  },
  // Estilos para el modal de notas
  modalOverlay: {
    flex: 1,
    justifyContent: 'center',
    alignItems: 'center',
    backgroundColor: 'rgba(0, 0, 0, 0.5)',
    paddingHorizontal: 20,
    paddingVertical: 40,
  },
  notesModalContainer: {
    backgroundColor: '#ffffff',
    borderRadius: 16,
    padding: 20,
    width: '90%',
    maxHeight: '40%',
    minHeight: '30%',
    shadowColor: '#000',
    shadowOffset: { width: 0, height: 6 },
    shadowOpacity: 0.4,
    shadowRadius: 8,
    elevation: 12,
  },
  notesModalHeader: {
    flexDirection: 'row',
    justifyContent: 'space-between',
    alignItems: 'center',
    marginBottom: 16,
    borderBottomWidth: 1,
    borderBottomColor: '#e9ecef',
    paddingBottom: 12,
  },
  notesModalTitle: {
    fontSize: 18,
    fontWeight: 'bold',
    color: '#2d4150',
  },
  closeNotesButton: {
    padding: 4,
  },
  notesModalContent: {
    flex: 1,
    marginBottom: 16,
  },
  notesTextInput: {
    fontSize: 14,
    color: '#495057',
    borderWidth: 1,
    borderColor: '#e9ecef',
    borderRadius: 8,
    padding: 12,
    backgroundColor: '#f8f9fa',
    minHeight: 100,
    maxHeight: 150,
    textAlignVertical: 'top',
  },
  notesModalFooter: {
    alignItems: 'center',
    paddingTop: 16,
    paddingBottom: 8,
  },
  saveNotesButton: {
    backgroundColor: '#007AFF',
    borderRadius: 8,
    paddingVertical: 12,
    paddingHorizontal: 24,
    minWidth: 100,
    alignItems: 'center',
  },
  saveNotesButtonText: {
    fontSize: 16,
    fontWeight: 'bold',
    color: '#ffffff',
  },
  taskMetaInfo: {
    flexDirection: 'row',
    flexWrap: 'wrap',
    gap: 8,
    marginTop: 4,
  },
  taskMeta: {
    fontSize: 12,
    color: '#6c757d',
    backgroundColor: '#f8f9fa',
    paddingHorizontal: 8,
    paddingVertical: 4,
    borderRadius: 12,
    borderWidth: 1,
    borderColor: '#e9ecef',
  },
  projectsGrid: {
    flexDirection: 'column',
    gap: 16,
  },
  projectCard: {
    backgroundColor: '#ffffff',
    borderRadius: 12,
    padding: 16,
    width: '100%',
    borderWidth: 1,
    borderColor: '#e9ecef',
    shadowColor: '#000',
    shadowOffset: {
      width: 0,
      height: 2,
    },
    shadowOpacity: 0.1,
    shadowRadius: 3.84,
    elevation: 5,
  },
  projectCardHeader: {
    flexDirection: 'row',
    justifyContent: 'space-between',
    alignItems: 'flex-start',
    marginBottom: 12,
  },
  projectCardTitle: {
    fontSize: 16,
    fontWeight: 'bold',
    color: '#2d4150',
    flex: 1,
    marginRight: 8,
  },
  projectDeleteButton: {
    width: 24,
    height: 24,
    borderRadius: 12,
    backgroundColor: '#f8f9fa',
    justifyContent: 'center',
    alignItems: 'center',
  },
  projectCardDescription: {
    fontSize: 14,
    color: '#6c757d',
    marginBottom: 12,
    lineHeight: 20,
  },
  projectCardMeta: {
    flexDirection: 'row',
    alignItems: 'center',
    marginBottom: 6,
  },
  projectCardMetaText: {
    fontSize: 12,
    color: '#6c757d',
    marginLeft: 6,
  },
  horizontalScrollContainer: {
    alignItems: 'center',
    justifyContent: 'center',
    paddingHorizontal: 0,
  },
  projectModalContainer: {
    backgroundColor: '#ffffff',
    borderRadius: 16,
    margin: 0,
    maxHeight: '95%',
    minWidth: 350, // Más ancho
    maxWidth: 450, // Límite máximo más grande
    width: '95%',
    shadowColor: '#000',
    shadowOffset: {
      width: 0,
      height: 4,
    },
    shadowOpacity: 0.25,
    shadowRadius: 8,
    elevation: 10,
  },
  projectModalContent: {
    maxHeight: 600,
    paddingHorizontal: 20,
  },
  projectSection: {
    marginBottom: 24,
  },
  projectSectionTitle: {
    fontSize: 16,
    fontWeight: 'bold',
    color: '#2d4150',
    marginBottom: 16,
    borderBottomWidth: 1,
    borderBottomColor: '#e9ecef',
    paddingBottom: 8,
  },
  // Estilos para formulario
  formSection: {
    marginBottom: 24,
  },
  formSectionTitle: {
    fontSize: 18,
    fontWeight: 'bold',
    color: '#2d4150',
    marginBottom: 16,
  },
  formSectionHeader: {
    flexDirection: 'row',
    justifyContent: 'space-between',
    alignItems: 'center',
    marginBottom: 16,
  },
  formField: {
    marginBottom: 16,
  },
  formLabel: {
    fontSize: 14,
    fontWeight: '600',
    color: '#495057',
    marginBottom: 8,
  },
  formInput: {
    flex: 1,
    borderWidth: 1,
    borderColor: '#e9ecef',
    borderRadius: 8,
    paddingHorizontal: 12,
    paddingVertical: 12,
    fontSize: 16,
    backgroundColor: '#ffffff',
    color: '#495057',
  },
  formTextArea: {
    height: 80,
    textAlignVertical: 'top',
  },
  addGoalButton: {
    flexDirection: 'row',
    alignItems: 'center',
    backgroundColor: '#FF6B6B',
    paddingHorizontal: 16,
    paddingVertical: 8,
    borderRadius: 20,
  },
  addGoalButtonText: {
    color: '#FFFFFF',
    fontSize: 14,
    fontWeight: '600',
    marginLeft: 6,
  },
  emptyGoalsState: {
    alignItems: 'center',
    paddingVertical: 32,
    backgroundColor: '#f8f9fa',
    borderRadius: 12,
    borderWidth: 1,
    borderColor: '#e9ecef',
    borderStyle: 'dashed',
  },
  emptyGoalsText: {
    fontSize: 16,
    color: '#6c757d',
    marginTop: 12,
    fontWeight: '500',
  },
  emptyGoalsSubtext: {
    fontSize: 14,
    color: '#adb5bd',
    marginTop: 4,
  },
  goalCard: {
    backgroundColor: '#ffffff',
    borderRadius: 12,
    padding: 16,
    marginBottom: 16,
    borderWidth: 1,
    borderColor: '#e9ecef',
    shadowColor: '#000',
    shadowOffset: {
      width: 0,
      height: 2,
    },
    shadowOpacity: 0.1,
    shadowRadius: 3,
    elevation: 3,
  },
  goalCardHeader: {
    flexDirection: 'row',
    justifyContent: 'space-between',
    alignItems: 'center',
    marginBottom: 12,
  },
  goalNumber: {
    fontSize: 14,
    fontWeight: 'bold',
    color: '#FF6B6B',
    backgroundColor: '#fff5f5',
    paddingHorizontal: 8,
    paddingVertical: 4,
    borderRadius: 12,
  },
  goalText: {
    fontSize: 16,
    fontWeight: '600',
    color: '#2d4150',
    lineHeight: 22,
    marginBottom: 8,
  },
  goalDateContainer: {
    flexDirection: 'row',
    flexWrap: 'wrap',
    alignItems: 'center',
    marginTop: 8,
    marginBottom: 12,
    gap: 12,
  },
  goalDateText: {
    fontSize: 14,
    color: '#007AFF',
    fontWeight: '500',
    marginLeft: 6,
    flex: 1,
    minWidth: '45%',
  },
  removeGoalButton: {
    width: 24,
    height: 24,
    borderRadius: 12,
    backgroundColor: '#f8f9fa',
    justifyContent: 'center',
    alignItems: 'center',
  },
  goalActionsRow: {
    flexDirection: 'row',
    gap: 12,
  },
  goalActionButton: {
    flex: 1,
    flexDirection: 'row',
    alignItems: 'center',
    justifyContent: 'center',
    paddingVertical: 10,
    paddingHorizontal: 12,
    borderRadius: 8,
    borderWidth: 1,
    borderColor: '#e9ecef',
    backgroundColor: '#ffffff',
  },
  goalActionButtonActive: {
    backgroundColor: '#007AFF',
    borderColor: '#007AFF',
  },
  goalActionText: {
    fontSize: 12,
    color: '#6c757d',
    marginLeft: 6,
    fontWeight: '500',
  },
  goalActionTextActive: {
    color: '#FFFFFF',
  },
  // Estilos para el campo de fecha con icono
  dateInputContainer: {
    flexDirection: 'row',
    alignItems: 'center',
    position: 'relative',
  },
  calendarIconButton: {
    position: 'absolute',
    right: 12,
    padding: 8,
    backgroundColor: '#f8f9fa',
    borderRadius: 6,
    borderWidth: 1,
    borderColor: '#e9ecef',
  },
  // Estilos para el contenedor del nombre del proyecto
  projectNameContainer: {
    flexDirection: 'row',
    alignItems: 'center',
    position: 'relative',
  },
  projectDeadlineButton: {
    position: 'absolute',
    right: 12,
    padding: 8,
    backgroundColor: '#f8f9fa',
    borderRadius: 6,
    borderWidth: 1,
    borderColor: '#e9ecef',
  },
  deadlineText: {
    fontSize: 12,
    color: '#6c757d',
    marginTop: 8,
    fontStyle: 'italic',
  },
  // Estilos para prioridades mejoradas
  addPriorityButton: {
    backgroundColor: '#FF6B6B',
    borderRadius: 20,
    width: 32,
    height: 32,
    justifyContent: 'center',
    alignItems: 'center',
  },
  emptyPrioritiesState: {
    alignItems: 'center',
    paddingVertical: 48,
    backgroundColor: '#f8f9fa',
    borderRadius: 16,
    borderWidth: 2,
    borderColor: '#e9ecef',
    borderStyle: 'dashed',
  },
  emptyPrioritiesText: {
    fontSize: 18,
    color: '#6c757d',
    marginTop: 16,
    fontWeight: '600',
  },
  emptyPrioritiesSubtext: {
    fontSize: 14,
    color: '#adb5bd',
    marginTop: 8,
    textAlign: 'center',
    paddingHorizontal: 20,
  },
  prioritiesContainer: {
    gap: 12,
  },
  priorityCard: {
    backgroundColor: '#ffffff',
    borderRadius: 12,
    padding: 12,
    borderLeftWidth: 4,
    borderWidth: 1,
    borderColor: '#e9ecef',
    shadowColor: '#000',
    shadowOffset: {
      width: 0,
      height: 2,
    },
    shadowOpacity: 0.08,
    shadowRadius: 4,
    elevation: 2,
  },
  completedPriorityCard: {
    backgroundColor: '#f8f9fa',
    opacity: 0.8,
  },
  priorityCardHeader: {
    flexDirection: 'row',
    justifyContent: 'space-between',
    alignItems: 'center',
    marginBottom: 8,
  },
  priorityNumberContainer: {
    flexDirection: 'row',
    alignItems: 'center',
  },
  priorityContentContainer: {
    flexDirection: 'row',
    alignItems: 'flex-start',
    flex: 1,
    gap: 12,
  },
  priorityNumber: {
    width: 24,
    height: 24,
    borderRadius: 12,
    color: '#FFFFFF',
    fontSize: 12,
    fontWeight: 'bold',
    textAlign: 'center',
    lineHeight: 24,
  },
  priorityActions: {
    flexDirection: 'row',
    alignItems: 'center',
    gap: 8,
  },
  priorityCheckbox: {
    width: 20,
    height: 20,
    borderRadius: 10,
    borderWidth: 2,
    borderColor: '#dee2e6',
    justifyContent: 'center',
    alignItems: 'center',
    backgroundColor: '#ffffff',
  },
  priorityCheckboxCompleted: {
    backgroundColor: '#28a745',
    borderColor: '#28a745',
  },
  priorityDeleteButton: {
    width: 20,
    height: 20,
    borderRadius: 10,
    backgroundColor: '#fff5f5',
    justifyContent: 'center',
    alignItems: 'center',
  },
  priorityInputContainer: {
    position: 'relative',
  },
  priorityTextInput: {
    fontSize: 16,
    color: '#2d4150',
    lineHeight: 22,
    minHeight: 24,
    flex: 1,
    textAlignVertical: 'top',
    paddingVertical: 0,
    paddingHorizontal: 0,
  },
  addNextPriorityButton: {
    position: 'absolute',
    right: 8,
    top: 8,
    backgroundColor: '#28a745',
    borderRadius: 16,
    width: 32,
    height: 32,
    justifyContent: 'center',
    alignItems: 'center',
    shadowColor: '#000',
    shadowOffset: {
      width: 0,
      height: 2,
    },
    shadowOpacity: 0.2,
    shadowRadius: 3,
    elevation: 3,
  },
  completedPriorityText: {
    textDecorationLine: 'line-through',
    color: '#6c757d',
  },
  completedBadge: {
    flexDirection: 'row',
    alignItems: 'center',
    marginTop: 12,
    paddingHorizontal: 12,
    paddingVertical: 6,
    backgroundColor: '#d4edda',
    borderRadius: 20,
    alignSelf: 'flex-start',
  },
  completedText: {
    fontSize: 12,
    color: '#28a745',
    fontWeight: '600',
    marginLeft: 4,
  },
  // Estilos para enfoque mejorado
  addFocusButton: {
    backgroundColor: '#0c5460',
    borderRadius: 20,
    width: 32,
    height: 32,
    justifyContent: 'center',
    alignItems: 'center',
  },
  emptyFocusState: {
    alignItems: 'center',
    paddingVertical: 48,
    backgroundColor: '#f8f9fa',
    borderRadius: 16,
    borderWidth: 2,
    borderColor: '#e9ecef',
    borderStyle: 'dashed',
  },
  emptyFocusText: {
    fontSize: 18,
    color: '#6c757d',
    marginTop: 16,
    fontWeight: '600',
  },
  emptyFocusSubtext: {
    fontSize: 14,
    color: '#adb5bd',
    marginTop: 8,
    textAlign: 'center',
    paddingHorizontal: 20,
  },
  focusContainer: {
    gap: 12,
  },
  focusCard: {
    backgroundColor: '#ffffff',
    borderRadius: 12,
    padding: 12,
    borderLeftWidth: 4,
    borderWidth: 1,
    borderColor: '#e9ecef',
    shadowColor: '#000',
    shadowOffset: {
      width: 0,
      height: 2,
    },
    shadowOpacity: 0.08,
    shadowRadius: 4,
    elevation: 2,
  },
  completedFocusCard: {
    backgroundColor: '#f8f9fa',
    opacity: 0.8,
  },
  focusCardHeader: {
    flexDirection: 'row',
    justifyContent: 'space-between',
    alignItems: 'center',
    marginBottom: 8,
  },
  focusNumberContainer: {
    flexDirection: 'row',
    alignItems: 'center',
  },
  focusContentContainer: {
    flexDirection: 'row',
    alignItems: 'flex-start',
    flex: 1,
    gap: 12,
  },
  focusNumber: {
    width: 24,
    height: 24,
    borderRadius: 12,
    color: '#FFFFFF',
    fontSize: 12,
    fontWeight: 'bold',
    textAlign: 'center',
    lineHeight: 24,
  },
  focusActions: {
    flexDirection: 'row',
    alignItems: 'center',
    gap: 8,
  },
  focusCheckbox: {
    width: 20,
    height: 20,
    borderRadius: 10,
    borderWidth: 2,
    borderColor: '#dee2e6',
    justifyContent: 'center',
    alignItems: 'center',
    backgroundColor: '#ffffff',
  },
  focusCheckboxCompleted: {
    backgroundColor: '#28a745',
    borderColor: '#28a745',
  },
  focusDeleteButton: {
    width: 20,
    height: 20,
    borderRadius: 10,
    backgroundColor: '#fff5f5',
    justifyContent: 'center',
    alignItems: 'center',
  },
  focusInputContainer: {
    position: 'relative',
  },
  focusTextInput: {
    fontSize: 16,
    color: '#2d4150',
    lineHeight: 22,
    minHeight: 24,
    flex: 1,
    textAlignVertical: 'top',
    paddingVertical: 0,
    paddingHorizontal: 0,
  },
  addNextFocusButton: {
    position: 'absolute',
    right: 8,
    top: 8,
    backgroundColor: '#28a745',
    borderRadius: 16,
    width: 32,
    height: 32,
    justifyContent: 'center',
    alignItems: 'center',
    shadowColor: '#000',
    shadowOffset: {
      width: 0,
      height: 2,
    },
    shadowOpacity: 0.2,
    shadowRadius: 3,
    elevation: 3,
  },
  completedFocusText: {
    textDecorationLine: 'line-through',
    color: '#6c757d',
  },
  // Estilos para objetivos mejorados
  addGoalsButton: {
    backgroundColor: '#28a745',
    borderRadius: 20,
    width: 32,
    height: 32,
    justifyContent: 'center',
    alignItems: 'center',
  },
  emptyGoalsState: {
    alignItems: 'center',
    paddingVertical: 48,
    backgroundColor: '#f8f9fa',
    borderRadius: 16,
    borderWidth: 2,
    borderColor: '#e9ecef',
    borderStyle: 'dashed',
  },
  emptyGoalsText: {
    fontSize: 18,
    color: '#6c757d',
    marginTop: 16,
    fontWeight: '600',
  },
  emptyGoalsSubtext: {
    fontSize: 14,
    color: '#adb5bd',
    marginTop: 8,
    textAlign: 'center',
    paddingHorizontal: 20,
  },
  goalsContainer: {
    gap: 12,
  },
  goalCard: {
    backgroundColor: '#ffffff',
    borderRadius: 12,
    padding: 12,
    borderLeftWidth: 4,
    borderWidth: 1,
    borderColor: '#e9ecef',
    shadowColor: '#000',
    shadowOffset: {
      width: 0,
      height: 2,
    },
    shadowOpacity: 0.08,
    shadowRadius: 4,
    elevation: 2,
  },
  completedGoalCard: {
    backgroundColor: '#f8f9fa',
    opacity: 0.8,
  },
  goalCardHeader: {
    flexDirection: 'row',
    justifyContent: 'space-between',
    alignItems: 'center',
    marginBottom: 8,
  },
  goalNumberContainer: {
    flexDirection: 'row',
    alignItems: 'center',
  },
  goalContentContainer: {
    flexDirection: 'row',
    alignItems: 'flex-start',
    flex: 1,
    gap: 12,
  },
  goalNumber: {
    width: 24,
    height: 24,
    borderRadius: 12,
    color: '#FFFFFF',
    fontSize: 12,
    fontWeight: 'bold',
    textAlign: 'center',
    lineHeight: 24,
  },
  goalActions: {
    flexDirection: 'row',
    alignItems: 'center',
    gap: 8,
  },
  goalCheckbox: {
    width: 20,
    height: 20,
    borderRadius: 10,
    borderWidth: 2,
    borderColor: '#dee2e6',
    justifyContent: 'center',
    alignItems: 'center',
    backgroundColor: '#ffffff',
  },
  goalCheckboxCompleted: {
    backgroundColor: '#28a745',
    borderColor: '#28a745',
  },
  goalDeleteButton: {
    width: 20,
    height: 20,
    borderRadius: 10,
    backgroundColor: '#fff5f5',
    justifyContent: 'center',
    alignItems: 'center',
  },
  goalInputContainer: {
    position: 'relative',
  },
  goalTextInput: {
    fontSize: 16,
    color: '#2d4150',
    lineHeight: 22,
    minHeight: 24,
    flex: 1,
    textAlignVertical: 'top',
    paddingVertical: 0,
    paddingHorizontal: 0,
  },
  addNextGoalButton: {
    position: 'absolute',
    right: 8,
    top: 8,
    backgroundColor: '#28a745',
    borderRadius: 16,
    width: 32,
    height: 32,
    justifyContent: 'center',
    alignItems: 'center',
    shadowColor: '#000',
    shadowOffset: {
      width: 0,
      height: 2,
    },
    shadowOpacity: 0.2,
    shadowRadius: 3,
    elevation: 3,
  },
  completedGoalText: {
    textDecorationLine: 'line-through',
    color: '#6c757d',
  },
  deadlineModalText: {
    fontSize: 16,
    color: '#2d4150',
    textAlign: 'center',
    marginBottom: 20,
    fontWeight: '500',
  },
  datePickerButton: {
    flexDirection: 'row',
    alignItems: 'center',
    justifyContent: 'center',
    backgroundColor: '#f8f9fa',
    borderWidth: 2,
    borderColor: '#007AFF',
    borderRadius: 12,
    paddingVertical: 16,
    paddingHorizontal: 20,
    marginBottom: 20,
  },
  datePickerButtonText: {
    fontSize: 16,
    color: '#007AFF',
    marginLeft: 8,
    fontWeight: '600',
  },
  // Estilos para la interfaz mejorada de persona asignada
  personFormContainer: {
    gap: 24,
  },
  personInputGroup: {
    gap: 12,
  },
  personLabel: {
    fontSize: 14,
    fontWeight: '600',
    color: '#495057',
    marginBottom: 6,
  },
  personTextInput: {
    borderWidth: 1,
    borderColor: '#e9ecef',
    borderRadius: 8,
    paddingHorizontal: 12,
    paddingVertical: 12,
    fontSize: 16,
    backgroundColor: '#ffffff',
    color: '#495057',
  },
  selectedDateContainer: {
    backgroundColor: '#e3f2fd',
    borderRadius: 8,
    padding: 12,
    borderWidth: 1,
    borderColor: '#bbdefb',
  },
  selectedDateLabel: {
    fontSize: 12,
    fontWeight: '600',
    color: '#1976d2',
    marginBottom: 4,
  },
  selectedDateText: {
    fontSize: 16,
    fontWeight: '600',
    color: '#1976d2',
  },
  personPreviewContainer: {
    marginTop: 16,
  },
  personPreviewLabel: {
    fontSize: 12,
    fontWeight: '600',
    color: '#6c757d',
    marginBottom: 12,
    textTransform: 'uppercase',
    letterSpacing: 0.5,
  },
  personPreviewCard: {
    flexDirection: 'row',
    alignItems: 'flex-start',
    backgroundColor: '#f8f9fa',
    borderRadius: 12,
    padding: 16,
    borderWidth: 1,
    borderColor: '#e9ecef',
    gap: 12,
  },
  personPreviewInfo: {
    flex: 1,
    gap: 6,
  },
  personPreviewName: {
    fontSize: 16,
    fontWeight: '600',
    color: '#2d4150',
    marginBottom: 4,
  },
  personPreviewPosition: {
    fontSize: 14,
    color: '#6c757d',
    fontStyle: 'italic',
    marginBottom: 4,
  },
  personPreviewDate: {
    fontSize: 13,
    color: '#007AFF',
    fontWeight: '500',
  },
  cancelPersonButton: {
    flex: 1,
    backgroundColor: '#f8f9fa',
    borderRadius: 8,
    paddingVertical: 12,
    paddingHorizontal: 20,
    marginRight: 8,
    borderWidth: 1,
    borderColor: '#e9ecef',
    alignItems: 'center',
    justifyContent: 'center',
  },
  cancelPersonButtonText: {
    fontSize: 16,
    fontWeight: '600',
    color: '#6c757d',
  },
  // Estilos simplificados para persona asignada
  simplePersonFormContainer: {
    gap: 20,
  },
  simplePersonInputGroup: {
    gap: 8,
  },
  simplePersonLabel: {
    fontSize: 16,
    fontWeight: '600',
    color: '#495057',
    marginBottom: 8,
  },
  simplePersonTextInput: {
    borderWidth: 1,
    borderColor: '#e9ecef',
    borderRadius: 10,
    paddingHorizontal: 16,
    paddingVertical: 14,
    fontSize: 16,
    backgroundColor: '#ffffff',
    color: '#495057',
    minHeight: 50,
  },
  simpleSelectedDateContainer: {
    backgroundColor: '#e3f2fd',
    borderRadius: 10,
    padding: 16,
    borderWidth: 1,
    borderColor: '#bbdefb',
    marginTop: 8,
  },
  simpleSelectedDateLabel: {
    fontSize: 14,
    fontWeight: '600',
    color: '#1976d2',
    marginBottom: 6,
  },
  simpleSelectedDateText: {
    fontSize: 18,
    fontWeight: '600',
    color: '#1976d2',
  },
  addPersonButton: {
    flex: 1,
    backgroundColor: '#007AFF',
    borderRadius: 12,
    paddingVertical: 18,
    paddingHorizontal: 24,
    marginLeft: 8,
    flexDirection: 'row',
    alignItems: 'center',
    justifyContent: 'center',
    gap: 12,
    minHeight: 56,
    shadowColor: '#007AFF',
    shadowOffset: {
      width: 0,
      height: 4,
    },
    shadowOpacity: 0.4,
    shadowRadius: 6,
    elevation: 5,
  },
  addPersonButtonText: {
    fontSize: 18,
    fontWeight: '800',
    color: '#FFFFFF',
    letterSpacing: 0.5,
    textAlign: 'center',
    includeFontPadding: false,
    textAlignVertical: 'center',
  },

  // Nuevos estilos para Work Planner
  weeklyTableContainer: {
    backgroundColor: colors.surface,
    borderRadius: borderRadius.lg,
    padding: spacing.lg,
    marginBottom: spacing.lg,
    borderWidth: 2,
    borderColor: colors.neon.blue,
    shadowColor: colors.neon.blue,
    shadowOffset: { width: 0, height: 0 },
    shadowOpacity: 0.3,
    shadowRadius: 6,
    elevation: 4,
  },
  tableHeader: {
    flexDirection: 'row',
    backgroundColor: colors.neon.yellow,
    paddingVertical: spacing.sm,
    paddingHorizontal: spacing.xs,
    borderRadius: borderRadius.sm,
    marginBottom: spacing.sm,
  },
  tableHeaderText: {
    flex: 1,
    fontSize: typography.caption,
    fontWeight: typography.bold,
    color: colors.textPrimary,
    textAlign: 'center',
  },
  weeklyTableRow: {
    flexDirection: 'row',
    paddingVertical: spacing.sm,
    paddingHorizontal: spacing.xs,
    borderBottomWidth: 1,
    borderBottomColor: colors.neon.green,
  },
  dayText: {
    flex: 1,
    fontSize: typography.small,
    fontWeight: typography.semiBold,
    color: colors.textPrimary,
    textAlign: 'center',
  },
  tableInput: {
    flex: 1,
    fontSize: typography.small,
    color: colors.textPrimary,
    paddingVertical: spacing.xs,
    paddingHorizontal: spacing.xs,
    borderWidth: 1,
    borderColor: colors.neon.green,
    borderRadius: borderRadius.sm,
    marginHorizontal: spacing.xs,
  },
  prioritiesFocusContainer: {
    flexDirection: 'row',
    gap: spacing.md,
    marginBottom: spacing.lg,
  },
  prioritiesBox: {
    flex: 1,
    backgroundColor: colors.neon.yellow,
    borderRadius: borderRadius.lg,
    padding: spacing.md,
    borderWidth: 2,
    borderColor: colors.neon.orange,
  },
  prioritiesTitle: {
    fontSize: typography.h6,
    fontWeight: typography.bold,
    color: colors.textPrimary,
    marginBottom: spacing.sm,
  },
  prioritiesInput: {
    fontSize: typography.body,
    color: colors.textPrimary,
    minHeight: 80,
    textAlignVertical: 'top',
  },
  focusBox: {
    flex: 1,
    backgroundColor: colors.neon.blue,
    borderRadius: borderRadius.lg,
    padding: spacing.md,
    borderWidth: 2,
    borderColor: colors.neon.purple,
  },
  focusTitle: {
    fontSize: typography.h6,
    fontWeight: typography.bold,
    color: colors.textPrimary,
    marginBottom: spacing.sm,
  },
  focusInput: {
    fontSize: typography.body,
    color: colors.textPrimary,
    minHeight: 80,
    textAlignVertical: 'top',
  },
  dailyScheduleContainer: {
    flexDirection: 'row',
    gap: spacing.md,
  },
  timeColumn: {
    flex: 1,
    backgroundColor: colors.surface,
    borderRadius: borderRadius.lg,
    padding: spacing.md,
    borderWidth: 2,
    borderColor: colors.neon.blue,
  },
  timeColumnTitle: {
    fontSize: typography.h6,
    fontWeight: typography.bold,
    color: colors.textPrimary,
    marginBottom: spacing.sm,
    textAlign: 'center',
  },
  timeSlot: {
    flexDirection: 'row',
    alignItems: 'center',
    marginBottom: spacing.xs,
  },
  timeText: {
    fontSize: typography.small,
    fontWeight: typography.semiBold,
    color: colors.textPrimary,
    width: 50,
  },
  timeInput: {
    flex: 1,
    fontSize: typography.small,
    color: colors.textPrimary,
    paddingVertical: spacing.xs,
    paddingHorizontal: spacing.xs,
    borderWidth: 1,
    borderColor: colors.neon.green,
    borderRadius: borderRadius.sm,
    marginLeft: spacing.xs,
  },
  categoriesColumn: {
    flex: 2,
  },
  categoriesTable: {
    backgroundColor: colors.surface,
    borderRadius: borderRadius.lg,
    padding: spacing.md,
    marginBottom: spacing.md,
    borderWidth: 2,
    borderColor: colors.neon.purple,
  },
  categoriesHeader: {
    flexDirection: 'row',
    backgroundColor: colors.neon.pink,
    paddingVertical: spacing.sm,
    paddingHorizontal: spacing.xs,
    borderRadius: borderRadius.sm,
    marginBottom: spacing.sm,
  },
  categoriesHeaderText: {
    flex: 1,
    fontSize: typography.caption,
    fontWeight: typography.bold,
    color: colors.textPrimary,
    textAlign: 'center',
  },
  categoriesRow: {
    flexDirection: 'row',
    paddingVertical: spacing.sm,
    paddingHorizontal: spacing.xs,
    borderBottomWidth: 1,
    borderBottomColor: colors.neon.pink,
  },
  categoriesInput: {
    flex: 1,
    fontSize: typography.small,
    color: colors.textPrimary,
    paddingVertical: spacing.xs,
    paddingHorizontal: spacing.xs,
    borderWidth: 1,
    borderColor: colors.neon.pink,
    borderRadius: borderRadius.sm,
    marginHorizontal: spacing.xs,
  },
  noteBox: {
    backgroundColor: colors.neon.blue,
    borderRadius: borderRadius.lg,
    padding: spacing.md,
    borderWidth: 2,
    borderColor: colors.neon.green,
  },
  noteTitle: {
    fontSize: typography.h6,
    fontWeight: typography.bold,
    color: colors.textPrimary,
    marginBottom: spacing.sm,
  },
  noteInput: {
    fontSize: typography.body,
    color: colors.textPrimary,
    minHeight: 120,
    textAlignVertical: 'top',
  },
  strategyForm: {
    backgroundColor: colors.surface,
    borderRadius: borderRadius.lg,
    padding: spacing.lg,
    borderWidth: 2,
    borderColor: colors.neon.blue,
    shadowColor: colors.neon.blue,
    shadowOffset: { width: 0, height: 0 },
    shadowOpacity: 0.3,
    shadowRadius: 6,
    elevation: 4,
  },
  formRow: {
    marginBottom: spacing.md,
  },
  formLabel: {
    fontSize: typography.h6,
    fontWeight: typography.bold,
    color: colors.textPrimary,
    marginBottom: spacing.xs,
  },
  formInput: {
    fontSize: typography.body,
    color: colors.textPrimary,
    paddingVertical: spacing.sm,
    paddingHorizontal: spacing.md,
    borderWidth: 1,
    borderColor: colors.neon.green,
    borderRadius: borderRadius.md,
    backgroundColor: colors.background,
  },
  tableContainer: {
    marginBottom: spacing.lg,
  },
  tableTitle: {
    fontSize: typography.h6,
    fontWeight: typography.bold,
    color: colors.textPrimary,
    marginBottom: spacing.sm,
  },
  tableRow: {
    flexDirection: 'row',
    alignItems: 'center',
    paddingVertical: spacing.sm,
    paddingHorizontal: spacing.xs,
    borderBottomWidth: 1,
    borderBottomColor: colors.neon.green,
  },
  sttText: {
    fontSize: typography.small,
    fontWeight: typography.bold,
    color: colors.textPrimary,
    width: 30,
    textAlign: 'center',
  },
  addButton: {
    backgroundColor: colors.neon.green,
    borderRadius: borderRadius.md,
    paddingVertical: spacing.sm,
    paddingHorizontal: spacing.md,
    marginTop: spacing.sm,
    alignSelf: 'flex-start',
  },
  addButtonText: {
    fontSize: typography.small,
    fontWeight: typography.bold,
    color: colors.textPrimary,
  },
  useJournalButton: {
    backgroundColor: colors.neon.pink,
    borderRadius: borderRadius.lg,
    paddingVertical: spacing.lg,
    paddingHorizontal: spacing.xl,
    marginTop: spacing.lg,
    alignSelf: 'center',
    shadowColor: colors.neon.pink,
    shadowOffset: { width: 0, height: 4 },
    shadowOpacity: 0.3,
    shadowRadius: 8,
    elevation: 6,
  },
  useJournalButtonText: {
    fontSize: typography.h6,
    fontWeight: typography.bold,
    color: colors.textPrimary,
    textAlign: 'center',
  },
});

export default WorkSections;
